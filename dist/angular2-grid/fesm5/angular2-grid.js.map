{"version":3,"file":"angular2-grid.js.map","sources":["ng://angular2-grid/helpers/NgGridHelpers.ts","ng://angular2-grid/components/NgGridPlaceholder.ts","ng://angular2-grid/directives/NgGrid.ts","ng://angular2-grid/directives/NgGridItem.ts","ng://angular2-grid/modules/NgGrid.module.ts"],"sourcesContent":["import { NgGridItem } from \"../directives/NgGridItem\";\r\n\r\nexport function generateUuid(): string {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n\t\treturn v.toString(16);\r\n\t});\r\n}\r\n\r\nexport function sortItemsByPositionHorizontal(a: NgGridItem, b: NgGridItem): number {\r\n\tif (a.col === b.col) { return a.row - b.row; }\r\n\treturn a.col - b.col;\r\n}\r\n\r\nexport function sortItemsByPositionVertical(a: NgGridItem, b: NgGridItem): number {\r\n\tif (a.row === b.row) { return a.col - b.col; }\r\n\treturn a.row - b.row;\r\n}","import { NgGrid } from '../directives/NgGrid';\r\nimport { NgGridItem } from '../directives/NgGridItem';\r\nimport { NgGridItemPosition, NgGridItemSize } from '../interfaces/INgGrid';\r\nimport { Component, Directive, ElementRef, Renderer, EventEmitter, Host, ViewEncapsulation, Type, ComponentRef, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, DoCheck, ViewContainerRef, Output } from '@angular/core';\r\n\r\n@Component({\r\n\tselector: 'ng-grid-placeholder',\r\n\ttemplate: ''\r\n})\r\nexport class NgGridPlaceholder implements OnInit {\r\n\tprivate _size: NgGridItemSize;\r\n\tprivate _position: NgGridItemPosition;\r\n\tprivate _ngGrid: NgGrid;\r\n\tprivate _cascadeMode: string;\r\n\r\n\tconstructor(private _ngEl: ElementRef, private _renderer: Renderer) { }\r\n\r\n\tpublic registerGrid(ngGrid: NgGrid) {\r\n\t\tthis._ngGrid = ngGrid;\r\n\t}\r\n\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, 'grid-placeholder', true);\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setElementStyle(this._ngEl.nativeElement, 'position', 'absolute');\r\n\t}\r\n\r\n\tpublic setSize(newSize: NgGridItemSize): void {\r\n\t\tthis._size = newSize;\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic setGridPosition(newPosition: NgGridItemPosition): void {\r\n\t\tthis._position = newPosition;\r\n\t\tthis._recalculatePosition();\r\n\t}\r\n\r\n\tpublic setCascadeMode(cascade: string): void {\r\n\t\tthis._cascadeMode = cascade;\r\n\t\tswitch (cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'left', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'top', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'right', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'top', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'left', null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'left', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'bottom', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'top', null);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//\tPrivate methods\r\n\tprivate _setDimensions(w: number, h: number): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'width', w + 'px');\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'height', h + 'px');\r\n\t}\r\n\r\n\tprivate _setPosition(x: number, y: number): void {\r\n\t\tswitch (this._cascadeMode) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'translate(' + x + 'px, ' + y + 'px)');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'translate(' + -x + 'px, ' + y + 'px)');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'translate(' + x + 'px, ' + -y + 'px)');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _recalculatePosition(): void {\r\n\t\tconst x: number = (this._ngGrid.colWidth + this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._position.col - 1) + this._ngGrid.marginLeft + this._ngGrid.screenMargin;\r\n\t\tconst y: number = (this._ngGrid.rowHeight + this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._position.row - 1) + this._ngGrid.marginTop;\r\n\t\tthis._setPosition(x, y);\r\n\t}\r\n\r\n\tprivate _recalculateDimensions(): void {\r\n\t\tconst w: number = (this._ngGrid.colWidth * this._size.x) + ((this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._size.x - 1));\r\n\t\tconst h: number = (this._ngGrid.rowHeight * this._size.y) + ((this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._size.y - 1));\r\n\t\tthis._setDimensions(w, h);\r\n\t}\r\n}\r\n","import { Component, Directive, ElementRef, Renderer, EventEmitter, ComponentFactoryResolver, Host, ViewEncapsulation, Type, ComponentRef, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, DoCheck, ViewContainerRef, Output } from '@angular/core';\r\nimport { NgGridConfig, NgGridItemEvent, NgGridItemPosition, NgGridItemSize, NgGridRawPosition, NgGridItemDimensions, NgConfigFixDirection } from '../interfaces/INgGrid';\r\nimport { NgGridItem } from './NgGridItem';\r\nimport * as NgGridHelper from \"../helpers/NgGridHelpers\";\r\nimport { NgGridPlaceholder } from '../components/NgGridPlaceholder';\r\nimport { Subscription, Observable, fromEvent } from 'rxjs';\r\n\r\n@Directive({\r\n\tselector: '[ngGrid]',\r\n\tinputs: ['config: ngGrid'],\r\n\thost: {\r\n\t\t'(window:resize)': 'resizeEventHandler($event)',\r\n\t}\r\n})\r\nexport class NgGrid implements OnInit, DoCheck, OnDestroy {\r\n\t//\tEvent Emitters\r\n\t@Output() public onDragStart: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onDrag: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onDragStop: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onResizeStart: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onResize: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onResizeStop: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onItemChange: EventEmitter<Array<NgGridItemEvent>> = new EventEmitter<Array<NgGridItemEvent>>();\r\n\r\n\t//\tPublic variables\r\n\tpublic colWidth: number = 250;\r\n\tpublic rowHeight: number = 250;\r\n\tpublic minCols: number = 1;\r\n\tpublic minRows: number = 1;\r\n\tpublic marginTop: number = 10;\r\n\tpublic marginRight: number = 10;\r\n\tpublic marginBottom: number = 10;\r\n\tpublic marginLeft: number = 10;\r\n\tpublic screenMargin: number = 0;\r\n\tpublic isDragging: boolean = false;\r\n\tpublic isResizing: boolean = false;\r\n\tpublic autoStyle: boolean = true;\r\n\tpublic resizeEnable: boolean = true;\r\n\tpublic dragEnable: boolean = true;\r\n\tpublic cascade: string = 'up';\r\n\tpublic minWidth: number = 100;\r\n\tpublic minHeight: number = 100;\r\n\r\n\t//\tPrivate variables\r\n\tprivate _items: Map<string, NgGridItem> = new Map<string, NgGridItem>();\r\n\tprivate _draggingItem: NgGridItem = null;\r\n\tprivate _resizingItem: NgGridItem = null;\r\n\tprivate _resizeDirection: string = null;\r\n\tprivate _itemsInGrid: Set<string> = new Set<string>();\r\n\tprivate _containerWidth: number;\r\n\tprivate _containerHeight: number;\r\n\tprivate _maxCols: number = 0;\r\n\tprivate _maxRows: number = 0;\r\n\tprivate _visibleCols: number = 0;\r\n\tprivate _visibleRows: number = 0;\r\n\tprivate _setWidth: number = 250;\r\n\tprivate _setHeight: number = 250;\r\n\tprivate _posOffset: NgGridRawPosition = null;\r\n\tprivate _adding: boolean = false;\r\n\tprivate _placeholderRef: ComponentRef<NgGridPlaceholder> = null;\r\n\tprivate _fixToGrid: boolean = false;\r\n\tprivate _autoResize: boolean = false;\r\n\tprivate _differ: KeyValueDiffer<string, any>;\r\n\tprivate _destroyed: boolean = false;\r\n\tprivate _maintainRatio: boolean = false;\r\n\tprivate _aspectRatio: number;\r\n\tprivate _preferNew: boolean = false;\r\n\tprivate _zoomOnDrag: boolean = false;\r\n\tprivate _limitToScreen: boolean = false;\r\n\tprivate _centerToScreen: boolean = false;\r\n\tprivate _curMaxRow: number = 0;\r\n\tprivate _curMaxCol: number = 0;\r\n\tprivate _dragReady: boolean = false;\r\n\tprivate _resizeReady: boolean = false;\r\n\tprivate _elementBasedDynamicRowHeight: boolean = false;\r\n\tprivate _itemFixDirection: NgConfigFixDirection = \"cascade\";\r\n\tprivate _collisionFixDirection: NgConfigFixDirection = \"cascade\";\r\n\tprivate _cascadePromise: Promise<void>;\r\n\r\n\t// Events\r\n\tprivate _documentMousemove$: Observable<MouseEvent>;\r\n\tprivate _documentMouseup$: Observable<MouseEvent>;\r\n\tprivate _mousedown$: Observable<MouseEvent>;\r\n\tprivate _mousemove$: Observable<MouseEvent>;\r\n\tprivate _mouseup$: Observable<MouseEvent>;\r\n\tprivate _touchstart$: Observable<TouchEvent>;\r\n\tprivate _touchmove$: Observable<TouchEvent>;\r\n\tprivate _touchend$: Observable<TouchEvent>;\r\n\tprivate _subscriptions: Subscription[] = [];\r\n\r\n\tprivate _enabledListener: boolean = false;\r\n\r\n\t//\tDefault config\r\n\tprivate static CONST_DEFAULT_CONFIG: NgGridConfig = {\r\n\t\tmargins: [10],\r\n\t\tdraggable: true,\r\n\t\tresizable: true,\r\n\t\tmax_cols: 0,\r\n\t\tmax_rows: 0,\r\n\t\tvisible_cols: 0,\r\n\t\tvisible_rows: 0,\r\n\t\tcol_width: 250,\r\n\t\trow_height: 250,\r\n\t\tcascade: 'up',\r\n\t\tmin_width: 100,\r\n\t\tmin_height: 100,\r\n\t\tfix_to_grid: false,\r\n\t\tauto_style: true,\r\n\t\tauto_resize: false,\r\n\t\tmaintain_ratio: false,\r\n\t\tprefer_new: false,\r\n\t\tzoom_on_drag: false,\r\n\t\tlimit_to_screen: false,\r\n\t\tcenter_to_screen: false,\r\n\t\telement_based_row_height: false,\r\n\t\tfix_item_position_direction: \"cascade\",\r\n\t\tfix_collision_position_direction: \"cascade\",\r\n\t};\r\n\tprivate _config = NgGrid.CONST_DEFAULT_CONFIG;\r\n\r\n\t//\t[ng-grid] attribute handler\r\n\tset config(v: NgGridConfig) {\r\n\t\tif (v == null || typeof v !== \"object\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setConfig(v);\r\n\r\n\t\tif (this._differ == null && v != null) {\r\n\t\t\tthis._differ = this._differs.find(this._config).create();\r\n\t\t}\r\n\r\n\t\tthis._differ.diff(this._config);\r\n\t}\r\n\r\n\t//\tConstructor\r\n\tconstructor(\r\n\t\tprivate _differs: KeyValueDiffers,\r\n\t\tprivate _ngEl: ElementRef,\r\n\t\tprivate _renderer: Renderer,\r\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\r\n\t) {\r\n\t\tthis._defineListeners();\r\n\t}\r\n\r\n\t//\tPublic methods\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, 'grid', true);\r\n\t\tif (this.autoStyle) this._renderer.setElementStyle(this._ngEl.nativeElement, 'position', 'relative');\r\n\t\tthis.setConfig(this._config);\r\n\t}\r\n\r\n\tpublic ngOnDestroy(): void {\r\n\t\tthis._destroyed = true;\r\n\t\tthis._disableListeners();\r\n\t}\r\n\r\n\tpublic generateItemUid(): string {\r\n\t\tconst uid: string = NgGridHelper.generateUuid();\r\n\r\n\t\tif (this._items.has(uid)) {\r\n\t\t\treturn this.generateItemUid();\r\n\t\t}\r\n\r\n\t\treturn uid;\r\n\t}\r\n\r\n\tpublic setConfig(config: NgGridConfig): void {\r\n\t\tthis._config = config;\r\n\r\n\t\tvar maxColRowChanged = false;\r\n\t\tfor (var x in config) {\r\n\t\t\tvar val = config[x];\r\n\t\t\tvar intVal = !val ? 0 : parseInt(val);\r\n\r\n\t\t\tswitch (x) {\r\n\t\t\t\tcase 'margins':\r\n\t\t\t\t\tthis.setMargins(val);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'col_width':\r\n\t\t\t\t\tthis.colWidth = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'row_height':\r\n\t\t\t\t\tthis.rowHeight = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'auto_style':\r\n\t\t\t\t\tthis.autoStyle = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'auto_resize':\r\n\t\t\t\t\tthis._autoResize = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'draggable':\r\n\t\t\t\t\tthis.dragEnable = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'resizable':\r\n\t\t\t\t\tthis.resizeEnable = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'max_rows':\r\n\t\t\t\t\tmaxColRowChanged = maxColRowChanged || this._maxRows != intVal;\r\n\t\t\t\t\tthis._maxRows = intVal < 0 ? 0 : intVal;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'max_cols':\r\n\t\t\t\t\tmaxColRowChanged = maxColRowChanged || this._maxCols != intVal;\r\n\t\t\t\t\tthis._maxCols = intVal < 0 ? 0 : intVal;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'visible_rows':\r\n\t\t\t\t\tthis._visibleRows = Math.max(intVal, 0);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'visible_cols':\r\n\t\t\t\t\tthis._visibleCols = Math.max(intVal, 0);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_rows':\r\n\t\t\t\t\tthis.minRows = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_cols':\r\n\t\t\t\t\tthis.minCols = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_height':\r\n\t\t\t\t\tthis.minHeight = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_width':\r\n\t\t\t\t\tthis.minWidth = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'zoom_on_drag':\r\n\t\t\t\t\tthis._zoomOnDrag = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'cascade':\r\n\t\t\t\t\tif (this.cascade != val) {\r\n\t\t\t\t\t\tthis.cascade = val;\r\n\t\t\t\t\t\tthis._cascadeGrid();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fix_to_grid':\r\n\t\t\t\t\tthis._fixToGrid = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'maintain_ratio':\r\n\t\t\t\t\tthis._maintainRatio = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'prefer_new':\r\n\t\t\t\t\tthis._preferNew = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'limit_to_screen':\r\n\t\t\t\t\tthis._limitToScreen = !this._autoResize && !!val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'center_to_screen':\r\n\t\t\t\t\tthis._centerToScreen = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'element_based_row_height':\r\n\t\t\t\t\tthis._elementBasedDynamicRowHeight = !!val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fix_item_position_direction':\r\n\t\t\t\t\tthis._itemFixDirection = val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fix_collision_position_direction':\r\n\t\t\t\t\tthis._collisionFixDirection = val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.dragEnable || this.resizeEnable) {\r\n\t\t\tthis._enableListeners();\r\n\t\t} else {\r\n\t\t\tthis._disableListeners();\r\n\t\t}\r\n\r\n\t\tif (this._itemFixDirection === \"cascade\") {\r\n\t\t\tthis._itemFixDirection = this._getFixDirectionFromCascade();\r\n\t\t}\r\n\r\n\t\tif (this._collisionFixDirection === \"cascade\") {\r\n\t\t\tthis._collisionFixDirection = this._getFixDirectionFromCascade();\r\n\t\t}\r\n\r\n\t\tif (this._limitToScreen) {\r\n\t\t\tconst newMaxCols = this._getContainerColumns();\r\n\r\n\t\t\tif (this._maxCols != newMaxCols) {\r\n\t\t\t\tthis._maxCols = newMaxCols;\r\n\t\t\t\tmaxColRowChanged = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._limitToScreen && this._centerToScreen) {\r\n\t\t\tthis.screenMargin = this._getScreenMargin();\r\n\t\t} else {\r\n\t\t\tthis.screenMargin = 0;\r\n\t\t}\r\n\r\n\t\tif (this._maintainRatio) {\r\n\t\t\tif (this.colWidth && this.rowHeight) {\r\n\t\t\t\tthis._aspectRatio = this.colWidth / this.rowHeight;\r\n\t\t\t} else {\r\n\t\t\t\tthis._maintainRatio = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (maxColRowChanged) {\r\n\t\t\tif (this._maxCols > 0 && this._maxRows > 0) {\t//\tCan't have both, prioritise on cascade\r\n\t\t\t\tswitch (this.cascade) {\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tthis._maxCols = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis._maxRows = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._updatePositionsAfterMaxChange();\r\n\t\t}\r\n\r\n\t\tthis._calculateColWidth();\r\n\t\tthis._calculateRowHeight();\r\n\r\n\t\tvar maxWidth = this._maxCols * this.colWidth;\r\n\t\tvar maxHeight = this._maxRows * this.rowHeight;\r\n\r\n\t\tif (maxWidth > 0 && this.minWidth > maxWidth) this.minWidth = 0.75 * this.colWidth;\r\n\t\tif (maxHeight > 0 && this.minHeight > maxHeight) this.minHeight = 0.75 * this.rowHeight;\r\n\r\n\t\tif (this.minWidth > this.colWidth) this.minCols = Math.max(this.minCols, Math.ceil(this.minWidth / this.colWidth));\r\n\t\tif (this.minHeight > this.rowHeight) this.minRows = Math.max(this.minRows, Math.ceil(this.minHeight / this.rowHeight));\r\n\r\n\t\tif (this._maxCols > 0 && this.minCols > this._maxCols) this.minCols = 1;\r\n\t\tif (this._maxRows > 0 && this.minRows > this._maxRows) this.minRows = 1;\r\n\r\n\t\tthis._updateRatio();\r\n\r\n\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\tthis._removeFromGrid(item);\r\n\t\t\titem.setCascadeMode(this.cascade);\r\n\t\t});\r\n\r\n\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\titem.recalculateSelf();\r\n\t\t\tthis._addToGrid(item);\r\n\t\t});\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\t}\r\n\r\n\tpublic getItemPosition(itemId: string): NgGridItemPosition {\r\n\t\treturn this._items.has(itemId) ? this._items.get(itemId).getGridPosition() : null;\r\n\t}\r\n\r\n\tpublic getItemSize(itemId: string): NgGridItemSize {\r\n\t\treturn this._items.has(itemId) ? this._items.get(itemId).getSize() : null;\r\n\t}\r\n\r\n\tpublic ngDoCheck(): boolean {\r\n\t\tif (this._differ != null) {\r\n\t\t\tvar changes = this._differ.diff(this._config);\r\n\r\n\t\t\tif (changes != null) {\r\n\t\t\t\tthis._applyChanges(changes);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic setMargins(margins: Array<string>): void {\r\n\t\tthis.marginTop = Math.max(parseInt(margins[0]), 0);\r\n\t\tthis.marginRight = margins.length >= 2 ? Math.max(parseInt(margins[1]), 0) : this.marginTop;\r\n\t\tthis.marginBottom = margins.length >= 3 ? Math.max(parseInt(margins[2]), 0) : this.marginTop;\r\n\t\tthis.marginLeft = margins.length >= 4 ? Math.max(parseInt(margins[3]), 0) : this.marginRight;\r\n\t}\r\n\r\n\tpublic enableDrag(): void {\r\n\t\tthis.dragEnable = true;\r\n\t}\r\n\r\n\tpublic disableDrag(): void {\r\n\t\tthis.dragEnable = false;\r\n\t}\r\n\r\n\tpublic enableResize(): void {\r\n\t\tthis.resizeEnable = true;\r\n\t}\r\n\r\n\tpublic disableResize(): void {\r\n\t\tthis.resizeEnable = false;\r\n\t}\r\n\r\n\tpublic addItem(ngItem: NgGridItem): void {\r\n\t\tngItem.setCascadeMode(this.cascade);\r\n\r\n\t\tif (!this._preferNew) {\r\n\t\t\tvar newPos = this._fixGridPosition(ngItem.getGridPosition(), ngItem.getSize());\r\n\t\t\tngItem.setGridPosition(newPos);\r\n\t\t}\r\n\r\n\t\tif (ngItem.uid === null || this._items.has(ngItem.uid)) {\r\n\t\t\tngItem.uid = this.generateItemUid();\r\n\t\t}\r\n\r\n\t\tthis._items.set(ngItem.uid, ngItem);\r\n\t\tthis._addToGrid(ngItem);\r\n\r\n\t\tthis._updateSize();\r\n\r\n\t\tthis.triggerCascade().then(() => {\r\n\t\t\tngItem.recalculateSelf();\r\n\t\t\tngItem.onCascadeEvent();\r\n\r\n\t\t\tthis._emitOnItemChange();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tpublic removeItem(ngItem: NgGridItem): void {\r\n\t\tthis._removeFromGrid(ngItem);\r\n\r\n\t\tthis._items.delete(ngItem.uid);\r\n\r\n\t\tif (this._destroyed) return;\r\n\r\n\t\tthis.triggerCascade().then(() => {\r\n\t\t\tthis._updateSize();\r\n\t\t\tthis._items.forEach((item: NgGridItem) => item.recalculateSelf());\r\n\t\t\tthis._emitOnItemChange();\r\n\t\t});\r\n\t}\r\n\r\n\tpublic updateItem(ngItem: NgGridItem): void {\r\n\t\tthis._removeFromGrid(ngItem);\r\n\t\tthis._addToGrid(ngItem);\r\n\r\n\t\tthis.triggerCascade().then(() => {\r\n\t\t\tthis._updateSize();\r\n\t\t\tngItem.onCascadeEvent();\r\n\t\t});\r\n\t}\r\n\r\n\tpublic triggerCascade(): Promise<void> {\r\n\t\tif (!this._cascadePromise) {\r\n\t\t\tthis._cascadePromise = new Promise<void>((resolve: () => void) => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._cascadePromise = null;\r\n\t\t\t\t\tthis._cascadeGrid(null, null);\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}, 0);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this._cascadePromise;\r\n\t}\r\n\r\n\tpublic triggerResize(): void {\r\n\t\tthis.resizeEventHandler(null);\r\n\t}\r\n\r\n\tpublic resizeEventHandler(e: any): void {\r\n\t\tthis._calculateColWidth();\r\n\t\tthis._calculateRowHeight();\r\n\r\n\t\tthis._updateRatio();\r\n\r\n\t\tif (this._limitToScreen) {\r\n\t\t\tconst newMaxColumns = this._getContainerColumns();\r\n\t\t\tif (this._maxCols !== newMaxColumns) {\r\n\t\t\t\tthis._maxCols = newMaxColumns;\r\n\t\t\t\tthis._updatePositionsAfterMaxChange();\r\n\t\t\t\tthis._cascadeGrid();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._centerToScreen) {\r\n\t\t\t\tthis.screenMargin = this._getScreenMargin();\r\n\r\n\t\t\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\t\t\titem.recalculateSelf();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (this._autoResize) {\r\n\t\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\t\titem.recalculateSelf();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._updateSize();\r\n\t}\r\n\r\n\tpublic mouseDownEventHandler(e: MouseEvent | TouchEvent): void {\r\n\t\tvar mousePos = this._getMousePosition(e);\r\n\t\tvar item = this._getItemFromPosition(mousePos);\r\n\r\n\t\tif (item == null) return;\r\n\r\n\t\tconst resizeDirection: string = item.canResize(e);\r\n\r\n\t\tif (this.resizeEnable && resizeDirection) {\r\n\t\t\tthis._resizeReady = true;\r\n\t\t\tthis._resizingItem = item;\r\n\t\t\tthis._resizeDirection = resizeDirection;\r\n\r\n\t\t\te.preventDefault();\r\n\t\t} else if (this.dragEnable && item.canDrag(e)) {\r\n\t\t\tthis._dragReady = true;\r\n\t\t\tthis._draggingItem = item;\r\n\r\n\t\t\tconst itemPos = item.getPosition();\r\n\t\t\tthis._posOffset = { 'left': (mousePos.left - itemPos.left), 'top': (mousePos.top - itemPos.top) }\r\n\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic mouseUpEventHandler(e: MouseEvent | TouchEvent): void {\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis._dragStop(e);\r\n\t\t} else if (this.isResizing) {\r\n\t\t\tthis._resizeStop(e);\r\n\t\t} else if (this._dragReady || this._resizeReady) {\r\n\t\t\tthis._cleanDrag();\r\n\t\t\tthis._cleanResize();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic mouseMoveEventHandler(e: MouseEvent | TouchEvent): void {\r\n\t\tif (this._resizeReady) {\r\n\t\t\tthis._resizeStart(e);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t} else if (this._dragReady) {\r\n\t\t\tthis._dragStart(e);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis._drag(e);\r\n\t\t} else if (this.isResizing) {\r\n\t\t\tthis._resize(e);\r\n\t\t} else {\r\n\t\t\tvar mousePos = this._getMousePosition(e);\r\n\t\t\tvar item = this._getItemFromPosition(mousePos);\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\titem.onMouseMove(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//\tPrivate methods\r\n\tprivate _getFixDirectionFromCascade(): NgConfigFixDirection {\r\n\t\tswitch (this.cascade) {\r\n\t\t\tcase \"up\":\r\n\t\t\tcase \"down\":\r\n\t\t\t\treturn \"vertical\";\r\n\t\t\tcase \"left\":\r\n\t\t\tcase \"right\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"horizontal\";\r\n\t\t}\r\n\t}\r\n\tprivate _updatePositionsAfterMaxChange(): void {\r\n\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\tvar pos = item.getGridPosition();\r\n\t\t\tvar dims = item.getSize();\r\n\r\n\t\t\tif (!this._hasGridCollision(pos, dims) && this._isWithinBounds(pos, dims) && dims.x <= this._maxCols && dims.y <= this._maxRows) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\tif (this._maxCols > 0 && dims.x > this._maxCols) {\r\n\t\t\t\tdims.x = this._maxCols;\r\n\t\t\t\titem.setSize(dims);\r\n\t\t\t} else if (this._maxRows > 0 && dims.y > this._maxRows) {\r\n\t\t\t\tdims.y = this._maxRows;\r\n\t\t\t\titem.setSize(dims);\r\n\t\t\t}\r\n\r\n\t\t\tif (this._hasGridCollision(pos, dims) || !this._isWithinBounds(pos, dims, true)) {\r\n\t\t\t\tvar newPosition = this._fixGridPosition(pos, dims);\r\n\t\t\t\titem.setGridPosition(newPosition);\r\n\t\t\t}\r\n\r\n\t\t\tthis._addToGrid(item);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _calculateColWidth(): void {\r\n\t\tif (this._autoResize) {\r\n\t\t\tif (this._maxCols > 0 || this._visibleCols > 0) {\r\n\t\t\t\tvar maxCols = this._maxCols > 0 ? this._maxCols : this._visibleCols;\r\n\t\t\t\tvar maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\r\n\t\t\t\tvar colWidth: number = Math.floor(maxWidth / maxCols);\r\n\t\t\t\tcolWidth -= (this.marginLeft + this.marginRight);\r\n\t\t\t\tif (colWidth > 0) this.colWidth = colWidth;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.colWidth < this.minWidth || this.minCols > this._config.min_cols) {\r\n\t\t\tthis.minCols = Math.max(this._config.min_cols, Math.ceil(this.minWidth / this.colWidth));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _calculateRowHeight(): void {\r\n\t\tif (this._autoResize) {\r\n\t\t\tif (this._maxRows > 0 || this._visibleRows > 0) {\r\n\t\t\t\tvar maxRows = this._maxRows > 0 ? this._maxRows : this._visibleRows;\r\n\t\t\t\tlet maxHeight: number;\r\n\r\n\t\t\t\tif (this._elementBasedDynamicRowHeight) {\r\n\t\t\t\t\tmaxHeight = this._ngEl.nativeElement.getBoundingClientRect().height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmaxHeight = window.innerHeight - this.marginTop - this.marginBottom;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rowHeight: number = Math.max(Math.floor(maxHeight / maxRows), this.minHeight);\r\n\t\t\t\trowHeight -= (this.marginTop + this.marginBottom);\r\n\t\t\t\tif (rowHeight > 0) this.rowHeight = rowHeight;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.rowHeight < this.minHeight || this.minRows > this._config.min_rows) {\r\n\t\t\tthis.minRows = Math.max(this._config.min_rows, Math.ceil(this.minHeight / this.rowHeight));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _updateRatio(): void {\r\n\t\tif (!this._autoResize || !this._maintainRatio) return;\r\n\r\n\t\tif (this._maxCols > 0 && this._visibleRows <= 0) {\r\n\t\t\tthis.rowHeight = this.colWidth / this._aspectRatio;\r\n\t\t} else if (this._maxRows > 0 && this._visibleCols <= 0) {\r\n\t\t\tthis.colWidth = this._aspectRatio * this.rowHeight;\r\n\t\t} else if (this._maxCols == 0 && this._maxRows == 0) {\r\n\t\t\tif (this._visibleCols > 0) {\r\n\t\t\t\tthis.rowHeight = this.colWidth / this._aspectRatio;\r\n\t\t\t} else if (this._visibleRows > 0) {\r\n\t\t\t\tthis.colWidth = this._aspectRatio * this.rowHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _applyChanges(changes: any): void {\r\n\t\tchanges.forEachAddedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachChangedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachRemovedItem((record: any) => { delete this._config[record.key]; });\r\n\r\n\t\tthis.setConfig(this._config);\r\n\t}\r\n\r\n\tprivate _resizeStart(e: any): void {\r\n\t\tif (!this.resizeEnable || !this._resizingItem) return;\r\n\r\n\t\t//\tSetup\r\n\t\tthis._resizingItem.startMoving();\r\n\t\tthis._removeFromGrid(this._resizingItem);\r\n\t\tthis._createPlaceholder(this._resizingItem);\r\n\r\n\t\t//\tStatus Flags\r\n\t\tthis.isResizing = true;\r\n\t\tthis._resizeReady = false;\r\n\r\n\t\t//\tEvents\r\n\t\tthis.onResizeStart.emit(this._resizingItem);\r\n\t\tthis._resizingItem.onResizeStartEvent();\r\n\t}\r\n\r\n\tprivate _dragStart(e: any): void {\r\n\t\tif (!this.dragEnable || !this._draggingItem) return;\r\n\r\n\t\t//\tStart dragging\r\n\t\tthis._draggingItem.startMoving();\r\n\t\tthis._removeFromGrid(this._draggingItem);\r\n\t\tthis._createPlaceholder(this._draggingItem);\r\n\r\n\t\t//\tStatus Flags\r\n\t\tthis.isDragging = true;\r\n\t\tthis._dragReady = false;\r\n\r\n\t\t//\tEvents\r\n\t\tthis.onDragStart.emit(this._draggingItem);\r\n\t\tthis._draggingItem.onDragStartEvent();\r\n\r\n\t\t//\tZoom\r\n\t\tif (this._zoomOnDrag) {\r\n\t\t\tthis._zoomOut();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _zoomOut(): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'scale(0.5, 0.5)');\r\n\t}\r\n\r\n\tprivate _resetZoom(): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', '');\r\n\t}\r\n\r\n\tprivate _drag(e: any): void {\r\n\t\tif (!this.isDragging) return;\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t\tif (window.getSelection().empty) {\r\n\t\t\t\twindow.getSelection().empty();\r\n\t\t\t} else if (window.getSelection().removeAllRanges) {\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t} else if ((<any>document).selection) {\r\n\t\t\t(<any>document).selection.empty();\r\n\t\t}\r\n\r\n\t\tvar mousePos = this._getMousePosition(e);\r\n\t\tvar newL = (mousePos.left - this._posOffset.left);\r\n\t\tvar newT = (mousePos.top - this._posOffset.top);\r\n\r\n\t\tvar itemPos = this._draggingItem.getGridPosition();\r\n\t\tvar gridPos = this._calculateGridPosition(newL, newT);\r\n\t\tvar dims = this._draggingItem.getSize();\r\n\r\n\t\tgridPos = this._fixPosToBoundsX(gridPos, dims);\r\n\r\n\t\tif (!this._isWithinBoundsY(gridPos, dims)) {\r\n\t\t\tgridPos = this._fixPosToBoundsY(gridPos, dims);\r\n\t\t}\r\n\r\n\t\tif (gridPos.col != itemPos.col || gridPos.row != itemPos.row) {\r\n\t\t\tthis._draggingItem.setGridPosition(gridPos, this._fixToGrid);\r\n\t\t\tthis._placeholderRef.instance.setGridPosition(gridPos);\r\n\r\n\t\t\tif (['up', 'down', 'left', 'right'].indexOf(this.cascade) >= 0) {\r\n\t\t\t\tthis._fixGridCollisions(gridPos, dims);\r\n\t\t\t\tthis._cascadeGrid(gridPos, dims);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._fixToGrid) {\r\n\t\t\tthis._draggingItem.setPosition(newL, newT);\r\n\t\t}\r\n\r\n\t\tthis.onDrag.emit(this._draggingItem);\r\n\t\tthis._draggingItem.onDragEvent();\r\n\t}\r\n\r\n\tprivate _resize(e: any): void {\r\n\t\tif (!this.isResizing) { return; }\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t\tif (window.getSelection().empty) {\r\n\t\t\t\twindow.getSelection().empty();\r\n\t\t\t} else if (window.getSelection().removeAllRanges) {\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t} else if ((<any>document).selection) {\r\n\t\t\t(<any>document).selection.empty();\r\n\t\t}\r\n\r\n\t\tconst mousePos = this._getMousePosition(e);\r\n\t\tconst itemPos = this._resizingItem.getPosition();\r\n\t\tconst itemDims = this._resizingItem.getDimensions();\r\n\t\tconst endCorner = {\r\n\t\t\tleft: itemPos.left + itemDims.width,\r\n\t\t\ttop: itemPos.top + itemDims.height,\r\n\t\t}\r\n\r\n\t\tconst resizeTop = this._resizeDirection.includes('top');\r\n\t\tconst resizeBottom = this._resizeDirection.includes('bottom');\r\n\t\tconst resizeLeft = this._resizeDirection.includes('left')\r\n\t\tconst resizeRight = this._resizeDirection.includes('right');\r\n\r\n\t\t//\tCalculate new width and height based upon resize direction\r\n\t\tlet newW = resizeRight\r\n\t\t\t? (mousePos.left - itemPos.left + 1)\r\n\t\t\t: resizeLeft\r\n\t\t\t\t? (endCorner.left - mousePos.left + 1)\r\n\t\t\t\t: itemDims.width;\r\n\t\tlet newH = resizeBottom\r\n\t\t\t? (mousePos.top - itemPos.top + 1)\r\n\t\t\t: resizeTop\r\n\t\t\t\t? (endCorner.top - mousePos.top + 1)\r\n\t\t\t\t: itemDims.height;\r\n\r\n\t\tif (newW < this.minWidth)\r\n\t\t\tnewW = this.minWidth;\r\n\t\tif (newH < this.minHeight)\r\n\t\t\tnewH = this.minHeight;\r\n\t\tif (newW < this._resizingItem.minWidth)\r\n\t\t\tnewW = this._resizingItem.minWidth;\r\n\t\tif (newH < this._resizingItem.minHeight)\r\n\t\t\tnewH = this._resizingItem.minHeight;\r\n\r\n\t\tlet newX = itemPos.left;\r\n\t\tlet newY = itemPos.top;\r\n\r\n\t\tif (resizeLeft)\r\n\t\t\tnewX = endCorner.left - newW;\r\n\t\tif (resizeTop)\r\n\t\t\tnewY = endCorner.top - newH;\r\n\r\n\t\tlet calcSize = this._calculateGridSize(newW, newH);\r\n\t\tconst itemSize = this._resizingItem.getSize();\r\n\t\tconst iGridPos = this._resizingItem.getGridPosition();\r\n\t\tconst bottomRightCorner = {\r\n\t\t\tcol: iGridPos.col + itemSize.x,\r\n\t\t\trow: iGridPos.row + itemSize.y,\r\n\t\t};\r\n\t\tconst targetPos: NgGridItemPosition = Object.assign({}, iGridPos);\r\n\r\n\t\tif (this._resizeDirection.includes(\"top\"))\r\n\t\t\ttargetPos.row = bottomRightCorner.row - calcSize.y;\r\n\t\tif (this._resizeDirection.includes(\"left\"))\r\n\t\t\ttargetPos.col = bottomRightCorner.col - calcSize.x;\r\n\r\n\t\tif (!this._isWithinBoundsX(targetPos, calcSize))\r\n\t\t\tcalcSize = this._fixSizeToBoundsX(targetPos, calcSize);\r\n\r\n\t\tif (!this._isWithinBoundsY(targetPos, calcSize))\r\n\t\t\tcalcSize = this._fixSizeToBoundsY(targetPos, calcSize);\r\n\r\n\t\tcalcSize = this._resizingItem.fixResize(calcSize);\r\n\r\n\t\tif (calcSize.x != itemSize.x || calcSize.y != itemSize.y) {\r\n\t\t\tthis._resizingItem.setGridPosition(targetPos, this._fixToGrid);\r\n\t\t\tthis._placeholderRef.instance.setGridPosition(targetPos);\r\n\t\t\tthis._resizingItem.setSize(calcSize, this._fixToGrid);\r\n\t\t\tthis._placeholderRef.instance.setSize(calcSize);\r\n\r\n\t\t\tif (['up', 'down', 'left', 'right'].indexOf(this.cascade) >= 0) {\r\n\t\t\t\tthis._fixGridCollisions(targetPos, calcSize);\r\n\t\t\t\tthis._cascadeGrid(targetPos, calcSize);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._fixToGrid) {\r\n\t\t\tthis._resizingItem.setDimensions(newW, newH);\r\n\t\t\tthis._resizingItem.setPosition(newX, newY);\r\n\t\t}\r\n\r\n\t\tthis.onResize.emit(this._resizingItem);\r\n\t\tthis._resizingItem.onResizeEvent();\r\n\t}\r\n\r\n\tprivate _dragStop(e: any): void {\r\n\t\tif (!this.isDragging) return;\r\n\r\n\t\tthis.isDragging = false;\r\n\r\n\t\tvar itemPos = this._draggingItem.getGridPosition();\r\n\r\n\t\tthis._draggingItem.setGridPosition(itemPos);\r\n\t\tthis._addToGrid(this._draggingItem);\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\r\n\t\tthis._draggingItem.stopMoving();\r\n\t\tthis._draggingItem.onDragStopEvent();\r\n\t\tthis.onDragStop.emit(this._draggingItem);\r\n\r\n\t\tthis._cleanDrag();\r\n\t\tthis._placeholderRef.destroy();\r\n\r\n\t\tthis._emitOnItemChange();\r\n\r\n\t\tif (this._zoomOnDrag) {\r\n\t\t\tthis._resetZoom();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _resizeStop(e: any): void {\r\n\t\tif (!this.isResizing) return;\r\n\r\n\t\tthis.isResizing = false;\r\n\r\n\t\tconst itemDims = this._resizingItem.getSize();\r\n\t\tthis._resizingItem.setSize(itemDims);\r\n\r\n\t\tconst itemPos = this._resizingItem.getGridPosition();\r\n\t\tthis._resizingItem.setGridPosition(itemPos);\r\n\r\n\t\tthis._addToGrid(this._resizingItem);\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\r\n\t\tthis._resizingItem.stopMoving();\r\n\t\tthis._resizingItem.onResizeStopEvent();\r\n\t\tthis.onResizeStop.emit(this._resizingItem);\r\n\r\n\t\tthis._cleanResize();\r\n\t\tthis._placeholderRef.destroy();\r\n\r\n\t\tthis._emitOnItemChange();\r\n\t}\r\n\r\n\tprivate _cleanDrag(): void {\r\n\t\tthis._draggingItem = null;\r\n\t\tthis._posOffset = null;\r\n\t\tthis.isDragging = false;\r\n\t\tthis._dragReady = false;\r\n\t}\r\n\r\n\tprivate _cleanResize(): void {\r\n\t\tthis._resizingItem = null;\r\n\t\tthis._resizeDirection = null;\r\n\t\tthis.isResizing = false;\r\n\t\tthis._resizeReady = false;\r\n\t}\r\n\r\n\tprivate _calculateGridSize(width: number, height: number): NgGridItemSize {\r\n\t\twidth += this.marginLeft + this.marginRight;\r\n\t\theight += this.marginTop + this.marginBottom;\r\n\r\n\t\tvar sizex = Math.max(this.minCols, Math.round(width / (this.colWidth + this.marginLeft + this.marginRight)));\r\n\t\tvar sizey = Math.max(this.minRows, Math.round(height / (this.rowHeight + this.marginTop + this.marginBottom)));\r\n\r\n\t\tif (!this._isWithinBoundsX({ col: 1, row: 1 }, { x: sizex, y: sizey })) sizex = this._maxCols;\r\n\t\tif (!this._isWithinBoundsY({ col: 1, row: 1 }, { x: sizex, y: sizey })) sizey = this._maxRows;\r\n\r\n\t\treturn { 'x': sizex, 'y': sizey };\r\n\t}\r\n\r\n\tprivate _calculateGridPosition(left: number, top: number): NgGridItemPosition {\r\n\t\tvar col = Math.max(1, Math.round(left / (this.colWidth + this.marginLeft + this.marginRight)) + 1);\r\n\t\tvar row = Math.max(1, Math.round(top / (this.rowHeight + this.marginTop + this.marginBottom)) + 1);\r\n\r\n\t\tif (!this._isWithinBoundsX({ col: col, row: row }, { x: 1, y: 1 })) col = this._maxCols;\r\n\t\tif (!this._isWithinBoundsY({ col: col, row: row }, { x: 1, y: 1 })) row = this._maxRows;\r\n\r\n\t\treturn { 'col': col, 'row': row };\r\n\t}\r\n\r\n\tprivate _hasGridCollision(pos: NgGridItemPosition, dims: NgGridItemSize): boolean {\r\n\t\tvar positions = this._getCollisions(pos, dims);\r\n\r\n\t\tif (positions == null || positions.length == 0) return false;\r\n\r\n\t\treturn positions.some((v: NgGridItem) => {\r\n\t\t\treturn !(v === null);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _getCollisions(pos: NgGridItemPosition, dims: NgGridItemSize): Array<NgGridItem> {\r\n\t\tconst returns: Array<NgGridItem> = [];\r\n\r\n\t\tif (!pos.col) { pos.col = 1; }\r\n\t\tif (!pos.row) { pos.row = 1; }\r\n\r\n\t\tconst leftCol = pos.col;\r\n\t\tconst rightCol = pos.col + dims.x;\r\n\t\tconst topRow = pos.row;\r\n\t\tconst bottomRow = pos.row + dims.y;\r\n\r\n\t\tthis._itemsInGrid.forEach((itemId: string) => {\r\n\t\t\tconst item: NgGridItem = this._items.get(itemId);\r\n\r\n\t\t\tif (!item) {\r\n\t\t\t\tthis._itemsInGrid.delete(itemId);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst itemLeftCol = item.col;\r\n\t\t\tconst itemRightCol = item.col + item.sizex;\r\n\t\t\tconst itemTopRow = item.row;\r\n\t\t\tconst itemBottomRow = item.row + item.sizey;\r\n\r\n\t\t\tconst withinColumns = leftCol < itemRightCol && itemLeftCol < rightCol;\r\n\t\t\tconst withinRows = topRow < itemBottomRow && itemTopRow < bottomRow;\r\n\r\n\t\t\tif (withinColumns && withinRows) {\r\n\t\t\t\treturns.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn returns;\r\n\t}\r\n\r\n\tprivate _fixGridCollisions(pos: NgGridItemPosition, dims: NgGridItemSize): void {\r\n\t\tconst collisions: Array<NgGridItem> = this._getCollisions(pos, dims);\r\n\t\tif (collisions.length === 0) { return; }\r\n\r\n\t\tfor (let collision of collisions) {\r\n\t\t\tthis._removeFromGrid(collision);\r\n\r\n\t\t\tconst itemDims: NgGridItemSize = collision.getSize();\r\n\t\t\tconst itemPos: NgGridItemPosition = collision.getGridPosition();\r\n\t\t\tlet newItemPos: NgGridItemPosition = { col: itemPos.col, row: itemPos.row };\r\n\r\n\t\t\tif (this._collisionFixDirection === \"vertical\") {\r\n\t\t\t\tnewItemPos.row = pos.row + dims.y;\r\n\r\n\t\t\t\tif (!this._isWithinBoundsY(newItemPos, itemDims)) {\r\n\t\t\t\t\tnewItemPos.col = pos.col + dims.x;\r\n\t\t\t\t\tnewItemPos.row = 1;\r\n\t\t\t\t}\r\n\t\t\t} else if (this._collisionFixDirection === \"horizontal\") {\r\n\t\t\t\tnewItemPos.col = pos.col + dims.x;\r\n\r\n\t\t\t\tif (!this._isWithinBoundsX(newItemPos, itemDims)) {\r\n\t\t\t\t\tnewItemPos.col = 1;\r\n\t\t\t\t\tnewItemPos.row = pos.row + dims.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcollision.setGridPosition(newItemPos);\r\n\r\n\t\t\tthis._fixGridCollisions(newItemPos, itemDims);\r\n\t\t\tthis._addToGrid(collision);\r\n\t\t\tcollision.onCascadeEvent();\r\n\t\t}\r\n\r\n\t\tthis._fixGridCollisions(pos, dims);\r\n\t}\r\n\r\n\tprivate _cascadeGrid(pos?: NgGridItemPosition, dims?: NgGridItemSize): void {\r\n\t\tif (this._destroyed) return;\r\n\t\tif (!pos !== !dims) throw new Error('Cannot cascade with only position and not dimensions');\r\n\r\n\t\tif (this.isDragging && this._draggingItem && !pos && !dims) {\r\n\t\t\tpos = this._draggingItem.getGridPosition();\r\n\t\t\tdims = this._draggingItem.getSize();\r\n\t\t} else if (this.isResizing && this._resizingItem && !pos && !dims) {\r\n\t\t\tpos = this._resizingItem.getGridPosition();\r\n\t\t\tdims = this._resizingItem.getSize();\r\n\t\t}\r\n\r\n\t\tlet itemsInGrid: NgGridItem[] = Array.from(this._itemsInGrid, (itemId: string) => this._items.get(itemId));\r\n\r\n\t\tswitch (this.cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'down':\r\n\t\t\t\titemsInGrid = itemsInGrid.sort(NgGridHelper.sortItemsByPositionVertical);\r\n\t\t\t\tconst lowestRowPerColumn: Map<number, number> = new Map<number, number>();\r\n\r\n\t\t\t\tfor (let item of itemsInGrid) {\r\n\t\t\t\t\tif (item.isFixed) continue;\r\n\r\n\t\t\t\t\tconst itemDims: NgGridItemSize = item.getSize();\r\n\t\t\t\t\tconst itemPos: NgGridItemPosition = item.getGridPosition();\r\n\r\n\t\t\t\t\tlet lowestRowForItem: number = lowestRowPerColumn.get(itemPos.col) || 1;\r\n\r\n\t\t\t\t\tfor (let i: number = 1; i < itemDims.x; i++) {\r\n\t\t\t\t\t\tconst lowestRowForColumn = lowestRowPerColumn.get(itemPos.col + i) || 1;\r\n\t\t\t\t\t\tlowestRowForItem = Math.max(lowestRowForColumn, lowestRowForItem);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst leftCol = itemPos.col;\r\n\t\t\t\t\tconst rightCol = itemPos.col + itemDims.x;\r\n\r\n\t\t\t\t\tif (pos && dims) {\r\n\t\t\t\t\t\tconst withinColumns = rightCol > pos.col && leftCol < (pos.col + dims.x);\r\n\r\n\t\t\t\t\t\tif (withinColumns) {          //\tIf our element is in one of the item's columns\r\n\t\t\t\t\t\t\tconst roomAboveItem = itemDims.y <= (pos.row - lowestRowForItem);\r\n\r\n\t\t\t\t\t\t\tif (!roomAboveItem) {                                                  //\tItem can't fit above our element\r\n\t\t\t\t\t\t\t\tlowestRowForItem = Math.max(lowestRowForItem, pos.row + dims.y);   //\tSet the lowest row to be below it\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst newPos: NgGridItemPosition = { col: itemPos.col, row: lowestRowForItem };\r\n\r\n\t\t\t\t\t//\tWhat if it's not within bounds Y?\r\n\t\t\t\t\tif (lowestRowForItem != itemPos.row && this._isWithinBoundsY(newPos, itemDims)) {\t//\tIf the item is not already on this row move it up\r\n\t\t\t\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\t\t\t\titem.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\titem.onCascadeEvent();\r\n\t\t\t\t\t\tthis._addToGrid(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i: number = 0; i < itemDims.x; i++) {\r\n\t\t\t\t\t\tlowestRowPerColumn.set(itemPos.col + i, lowestRowForItem + itemDims.y);\t//\tUpdate the lowest row to be below the item\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\tcase 'right':\r\n\t\t\t\titemsInGrid = itemsInGrid.sort(NgGridHelper.sortItemsByPositionHorizontal);\r\n\t\t\t\tconst lowestColumnPerRow: Map<number, number> = new Map<number, number>();\r\n\r\n\t\t\t\tfor (let item of itemsInGrid) {\r\n\t\t\t\t\tconst itemDims: NgGridItemSize = item.getSize();\r\n\t\t\t\t\tconst itemPos: NgGridItemPosition = item.getGridPosition();\r\n\r\n\t\t\t\t\tlet lowestColumnForItem: number = lowestColumnPerRow.get(itemPos.row) || 1;\r\n\r\n\t\t\t\t\tfor (let i: number = 1; i < itemDims.y; i++) {\r\n\t\t\t\t\t\tlet lowestOffsetColumn: number = lowestColumnPerRow.get(itemPos.row + i) || 1;\r\n\t\t\t\t\t\tlowestColumnForItem = Math.max(lowestOffsetColumn, lowestColumnForItem);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst topRow = itemPos.row;\r\n\t\t\t\t\tconst bottomRow = itemPos.row + itemDims.y;\r\n\r\n\t\t\t\t\tif (pos && dims) {\r\n\t\t\t\t\t\tconst withinRows = bottomRow > pos.col && topRow < (pos.col + dims.x);\r\n\r\n\t\t\t\t\t\tif (withinRows) {          //\tIf our element is in one of the item's rows\r\n\t\t\t\t\t\t\tconst roomNextToItem = itemDims.x <= (pos.col - lowestColumnForItem);\r\n\r\n\t\t\t\t\t\t\tif (!roomNextToItem) {                                                      //\tItem can't fit next to our element\r\n\t\t\t\t\t\t\t\tlowestColumnForItem = Math.max(lowestColumnForItem, pos.col + dims.x);  //\tSet the lowest col to be the other side of it\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst newPos: NgGridItemPosition = { col: lowestColumnForItem, row: itemPos.row };\r\n\r\n\t\t\t\t\tif (lowestColumnForItem != itemPos.col && this._isWithinBoundsX(newPos, itemDims)) {\t//\tIf the item is not already on this col move it up\r\n\t\t\t\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\t\t\t\titem.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\titem.onCascadeEvent();\r\n\t\t\t\t\t\tthis._addToGrid(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i: number = 0; i < itemDims.y; i++) {\r\n\t\t\t\t\t\tlowestColumnPerRow.set(itemPos.row + i, lowestColumnForItem + itemDims.x);\t//\tUpdate the lowest col to be below the item\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _fixGridPosition(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\tif (!this._hasGridCollision(pos, dims)) return pos;\r\n\r\n\t\tconst maxRow = this._maxRows === 0 ? this._getMaxRow() : this._maxRows;\r\n\t\tconst maxCol = this._maxCols === 0 ? this._getMaxCol() : this._maxCols;\r\n\t\tconst newPos = {\r\n\t\t\tcol: pos.col,\r\n\t\t\trow: pos.row,\r\n\t\t};\r\n\r\n\t\tif (this._itemFixDirection === \"vertical\") {\r\n\t\t\tfixLoop:\r\n\t\t\tfor (; newPos.col <= maxRow;) {\r\n\t\t\t\tconst itemsInPath = this._getItemsInVerticalPath(newPos, dims, newPos.row);\r\n\t\t\t\tlet nextRow = newPos.row;\r\n\r\n\t\t\t\tfor (let item of itemsInPath) {\r\n\t\t\t\t\tif (item.row - nextRow >= dims.y) {\r\n\t\t\t\t\t\tnewPos.row = nextRow;\r\n\t\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnextRow = item.row + item.sizey;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (maxRow - nextRow >= dims.y) {\r\n\t\t\t\t\tnewPos.row = nextRow;\r\n\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnewPos.col = Math.max(newPos.col + 1, Math.min.apply(Math, itemsInPath.map((item) => item.col + dims.x)));\r\n\t\t\t\tnewPos.row = 1;\r\n\t\t\t}\r\n\t\t} else if (this._itemFixDirection === \"horizontal\") {\r\n\t\t\tfixLoop:\r\n\t\t\tfor (; newPos.row <= maxRow;) {\r\n\t\t\t\tconst itemsInPath = this._getItemsInHorizontalPath(newPos, dims, newPos.col);\r\n\t\t\t\tlet nextCol = newPos.col;\r\n\r\n\t\t\t\tfor (let item of itemsInPath) {\r\n\t\t\t\t\tif (item.col - nextCol >= dims.x) {\r\n\t\t\t\t\t\tnewPos.col = nextCol;\r\n\t\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnextCol = item.col + item.sizex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (maxCol - nextCol >= dims.x) {\r\n\t\t\t\t\tnewPos.col = nextCol;\r\n\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnewPos.row = Math.max(newPos.row + 1, Math.min.apply(Math, itemsInPath.map((item) => item.row + dims.y)));\r\n\t\t\t\tnewPos.col = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newPos;\r\n\t}\r\n\r\n\tprivate _getItemsInHorizontalPath(pos: NgGridItemPosition, dims: NgGridItemSize, startColumn: number = 0): NgGridItem[] {\r\n\t\tconst itemsInPath: NgGridItem[] = [];\r\n\t\tconst topRow: number = pos.row + dims.y - 1;\r\n\r\n\t\tthis._itemsInGrid.forEach((itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (item.col + item.sizex - 1 < startColumn) { return; }    //\tItem falls after start column\r\n\t\t\tif (item.row > topRow) { return; }                          //\tItem falls above path\r\n\t\t\tif (item.row + item.sizey - 1 < pos.row) { return; }        //\tItem falls below path\r\n\t\t\titemsInPath.push(item);\r\n\t\t});\r\n\r\n\t\treturn itemsInPath;\r\n\t}\r\n\r\n\tprivate _getItemsInVerticalPath(pos: NgGridItemPosition, dims: NgGridItemSize, startRow: number = 0): NgGridItem[] {\r\n\t\tconst itemsInPath: NgGridItem[] = [];\r\n\t\tconst rightCol: number = pos.col + dims.x - 1;\r\n\r\n\t\tthis._itemsInGrid.forEach((itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (item.row + item.sizey - 1 < startRow) { return; }   //\tItem falls above start row\r\n\t\t\tif (item.col > rightCol) { return; }                    //\tItem falls after path\r\n\t\t\tif (item.col + item.sizex - 1 < pos.col) { return; }    //\tItem falls before path\r\n\t\t\titemsInPath.push(item);\r\n\t\t});\r\n\r\n\t\treturn itemsInPath;\r\n\t}\r\n\r\n\tprivate _isWithinBoundsX(pos: NgGridItemPosition, dims: NgGridItemSize, allowExcessiveItems: boolean = false) {\r\n\t\treturn this._maxCols == 0 || (allowExcessiveItems && pos.col == 1) || (pos.col + dims.x - 1) <= this._maxCols;\r\n\t}\r\n\r\n\tprivate _fixPosToBoundsX(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\tif (!this._isWithinBoundsX(pos, dims)) {\r\n\t\t\tpos.col = Math.max(this._maxCols - (dims.x - 1), 1);\r\n\t\t\tpos.row ++;\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tprivate _fixSizeToBoundsX(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemSize {\r\n\t\tif (!this._isWithinBoundsX(pos, dims)) {\r\n\t\t\tdims.x = Math.max(this._maxCols - (pos.col - 1), 1);\r\n\t\t\tdims.y++;\r\n\t\t}\r\n\t\treturn dims;\r\n\t}\r\n\r\n\tprivate _isWithinBoundsY(pos: NgGridItemPosition, dims: NgGridItemSize, allowExcessiveItems: boolean = false) {\r\n\t\treturn this._maxRows == 0 || (allowExcessiveItems && pos.row == 1) || (pos.row + dims.y - 1) <= this._maxRows;\r\n\t}\r\n\r\n\tprivate _fixPosToBoundsY(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\tif (!this._isWithinBoundsY(pos, dims)) {\r\n\t\t\tpos.row = Math.max(this._maxRows - (dims.y - 1), 1);\r\n\t\t\tpos.col++;\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tprivate _fixSizeToBoundsY(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemSize {\r\n\t\tif (!this._isWithinBoundsY(pos, dims)) {\r\n\t\t\tdims.y = Math.max(this._maxRows - (pos.row - 1), 1);\r\n\t\t\tdims.x++;\r\n\t\t}\r\n\t\treturn dims;\r\n\t}\r\n\r\n\tprivate _isWithinBounds(pos: NgGridItemPosition, dims: NgGridItemSize, allowExcessiveItems: boolean = false) {\r\n\t\treturn this._isWithinBoundsX(pos, dims, allowExcessiveItems) && this._isWithinBoundsY(pos, dims, allowExcessiveItems);\r\n\t}\r\n\r\n\tprivate _fixPosToBounds(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\treturn this._fixPosToBoundsX(this._fixPosToBoundsY(pos, dims), dims);\r\n\t}\r\n\r\n\tprivate _fixSizeToBounds(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemSize {\r\n\t\treturn this._fixSizeToBoundsX(pos, this._fixSizeToBoundsY(pos, dims));\r\n\t}\r\n\r\n\tprivate _addToGrid(item: NgGridItem): void {\r\n\t\tlet pos: NgGridItemPosition = item.getGridPosition();\r\n\t\tconst dims: NgGridItemSize = item.getSize();\r\n\r\n\t\tif (this._hasGridCollision(pos, dims)) {\r\n\t\t\tthis._fixGridCollisions(pos, dims);\r\n\t\t\tpos = item.getGridPosition();\r\n\t\t}\r\n\r\n\t\tthis._itemsInGrid.add(item.uid);\r\n\t}\r\n\r\n\tprivate _removeFromGrid(item: NgGridItem): void {\r\n\t\tthis._itemsInGrid.delete(item.uid);\r\n\t}\r\n\r\n\tprivate _updateSize(): void {\r\n\t\tif (this._destroyed) return;\r\n\t\tlet maxCol: number = this._getMaxCol();\r\n\t\tlet maxRow: number = this._getMaxRow();\r\n\r\n\t\tif (maxCol != this._curMaxCol || maxRow != this._curMaxRow) {\r\n\t\t\tthis._curMaxCol = maxCol;\r\n\t\t\tthis._curMaxRow = maxRow;\r\n\t\t}\r\n\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'width', '100%');//(maxCol * (this.colWidth + this.marginLeft + this.marginRight))+'px');\r\n\t\tif (!this._elementBasedDynamicRowHeight) {\r\n\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'height', (maxRow * (this.rowHeight + this.marginTop + this.marginBottom)) + 'px');\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _getMaxRow(): number {\r\n\t\tconst itemsRows: number[] = Array.from(this._itemsInGrid, (itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (!item) return 0;\r\n\t\t\treturn item.row + item.sizey - 1;\r\n\t\t});\r\n\r\n\t\treturn Math.max.apply(null, itemsRows);\r\n\t}\r\n\r\n\tprivate _getMaxCol(): number {\r\n\t\tconst itemsCols: number[] = Array.from(this._itemsInGrid, (itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (!item) return 0;\r\n\t\t\treturn item.col + item.sizex - 1;\r\n\t\t});\r\n\r\n\t\treturn Math.max.apply(null, itemsCols);\r\n\t}\r\n\r\n\tprivate _getMousePosition(e: any): NgGridRawPosition {\r\n\t\tif (((<any>window).TouchEvent && e instanceof TouchEvent) || (e.touches || e.changedTouches)) {\r\n\t\t\te = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n\t\t}\r\n\r\n\t\tconst refPos: any = this._ngEl.nativeElement.getBoundingClientRect();\r\n\r\n\t\tlet left: number = e.clientX - refPos.left;\r\n\t\tlet top: number = e.clientY - refPos.top;\r\n\r\n\t\tif (this.cascade == 'down') top = refPos.top + refPos.height - e.clientY;\r\n\t\tif (this.cascade == 'right') left = refPos.left + refPos.width - e.clientX;\r\n\r\n\t\tif (this.isDragging && this._zoomOnDrag) {\r\n\t\t\tleft *= 2;\r\n\t\t\ttop *= 2;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _getAbsoluteMousePosition(e: any): NgGridRawPosition {\r\n\t\tif (((<any>window).TouchEvent && e instanceof TouchEvent) || (e.touches || e.changedTouches)) {\r\n\t\t\te = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft: e.clientX,\r\n\t\t\ttop: e.clientY\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _getContainerColumns(): number {\r\n\t\tconst maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\t\tconst itemWidth: number = this.colWidth + this.marginLeft + this.marginRight;\r\n\t\treturn Math.floor(maxWidth / itemWidth);\r\n\t}\r\n\r\n\tprivate _getContainerRows(): number {\r\n\t\tconst maxHeight: number = window.innerHeight - this.marginTop - this.marginBottom;\r\n\t\treturn Math.floor(maxHeight / (this.rowHeight + this.marginTop + this.marginBottom));\r\n\t}\r\n\r\n\tprivate _getScreenMargin(): number {\r\n\t\tconst maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\t\tconst itemWidth: number = this.colWidth + this.marginLeft + this.marginRight;\r\n\t\treturn Math.floor((maxWidth - (this._maxCols * itemWidth)) / 2);;\r\n\t}\r\n\r\n\tprivate _getItemFromPosition(position: NgGridRawPosition): NgGridItem {\r\n\t\treturn Array.from(this._itemsInGrid, (itemId: string) => this._items.get(itemId)).find((item: NgGridItem) => {\r\n\t\t\tif (!item) return false;\r\n\r\n\t\t\tconst size: NgGridItemDimensions = item.getDimensions();\r\n\t\t\tconst pos: NgGridRawPosition = item.getPosition();\r\n\r\n\t\t\treturn position.left >= pos.left && position.left < (pos.left + size.width) &&\r\n\t\t\tposition.top >= pos.top && position.top < (pos.top + size.height);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _createPlaceholder(item: NgGridItem): void {\r\n\t\tconst pos: NgGridItemPosition = item.getGridPosition();\r\n\t\tconst dims: NgGridItemSize = item.getSize();\r\n\r\n\t\tconst factory = this.componentFactoryResolver.resolveComponentFactory(NgGridPlaceholder);\r\n\t\tvar componentRef: ComponentRef<NgGridPlaceholder> = item.containerRef.createComponent(factory);\r\n\t\tthis._placeholderRef = componentRef;\r\n\t\tconst placeholder: NgGridPlaceholder = componentRef.instance;\r\n\t\tplaceholder.registerGrid(this);\r\n\t\tplaceholder.setCascadeMode(this.cascade);\r\n\t\tplaceholder.setGridPosition({ col: pos.col, row: pos.row });\r\n\t\tplaceholder.setSize({ x: dims.x, y: dims.y });\r\n\t}\r\n\r\n\tprivate _emitOnItemChange() {\r\n\t\tconst itemOutput: any[] = Array.from(this._itemsInGrid)\r\n\t\t\t.map((itemId: string) => this._items.get(itemId))\r\n\t\t\t.filter((item: NgGridItem) => !!item)\r\n\t\t\t.map((item: NgGridItem) => item.getEventOutput());\r\n\r\n\t\tthis.onItemChange.emit(itemOutput);\r\n\t}\r\n\r\n\tprivate _defineListeners(): void {\r\n\t\tconst element = this._ngEl.nativeElement;\r\n\r\n\t\tthis._documentMousemove$ = fromEvent<MouseEvent>(document, 'mousemove');\r\n\t\tthis._documentMouseup$ = fromEvent<MouseEvent>(document, 'mouseup');\r\n\t\tthis._mousedown$ = fromEvent(element, 'mousedown');\r\n\t\tthis._mousemove$ = fromEvent(element, 'mousemove');\r\n\t\tthis._mouseup$ = fromEvent(element, 'mouseup');\r\n\t\tthis._touchstart$ = fromEvent(element, 'touchstart');\r\n\t\tthis._touchmove$ = fromEvent(element, 'touchmove');\r\n\t\tthis._touchend$ = fromEvent(element, 'touchend');\r\n\t}\r\n\r\n\tprivate _enableListeners(): void {\r\n\t\tif (this._enabledListener) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._enableMouseListeners();\r\n\r\n\t\tif (this._isTouchDevice()) {\r\n\t\t\tthis._enableTouchListeners();\r\n\t\t}\r\n\r\n\t\tthis._enabledListener = true;\r\n\t}\r\n\r\n\tprivate _disableListeners(): void {\r\n\t\tthis._subscriptions.forEach((subs: Subscription) => subs.unsubscribe());\r\n\t\tthis._enabledListener = false;\r\n\t}\r\n\r\n\tprivate _isTouchDevice(): boolean {\r\n\t\treturn 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n\t};\r\n\r\n\tprivate _enableTouchListeners(): void {\r\n\t\tconst touchstartSubs = this._touchstart$.subscribe((e: TouchEvent) => this.mouseDownEventHandler(e));\r\n\t\tconst touchmoveSubs = this._touchmove$.subscribe((e: TouchEvent) => this.mouseMoveEventHandler(e));\r\n\t\tconst touchendSubs = this._touchend$.subscribe((e: TouchEvent) => this.mouseUpEventHandler(e));\r\n\r\n\t\tthis._subscriptions.push(\r\n\t\t\ttouchstartSubs,\r\n\t\t\ttouchmoveSubs,\r\n\t\t\ttouchendSubs\r\n\t\t);\r\n\t}\r\n\r\n\tprivate _enableMouseListeners(): void {\r\n\t\tconst documentMousemoveSubs = this._documentMousemove$.subscribe((e: MouseEvent) => this.mouseMoveEventHandler(e));\r\n\t\tconst documentMouseupSubs = this._documentMouseup$.subscribe((e: MouseEvent) => this.mouseUpEventHandler(e));\r\n\t\tconst mousedownSubs = this._mousedown$.subscribe((e: MouseEvent) => this.mouseDownEventHandler(e));\r\n\t\tconst mousemoveSubs = this._mousemove$.subscribe((e: MouseEvent) => this.mouseMoveEventHandler(e));\r\n\t\tconst mouseupSubs = this._mouseup$.subscribe((e: MouseEvent) => this.mouseUpEventHandler(e));\r\n\r\n\t\tthis._subscriptions.push(\r\n\t\t\tdocumentMousemoveSubs,\r\n\t\t\tdocumentMouseupSubs,\r\n\t\t\tmousedownSubs,\r\n\t\t\tmousemoveSubs,\r\n\t\t\tmouseupSubs\r\n\t\t);\r\n\t}\r\n}\r\n","import { NgGrid } from './NgGrid';\r\nimport { NgGridItemConfig, NgGridItemEvent, NgGridItemPosition, NgGridItemSize, NgGridRawPosition, NgGridItemDimensions, ResizeHandle } from '../interfaces/INgGrid';\r\nimport { Directive, ElementRef, Renderer2, EventEmitter, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, ViewContainerRef, Output, DoCheck } from '@angular/core';\r\n\r\n@Directive({\r\n\tselector: '[ngGridItem]',\r\n\tinputs: ['config: ngGridItem']\r\n})\r\nexport class NgGridItem implements OnInit, OnDestroy, DoCheck {\r\n\t//\tEvent Emitters\r\n\t@Output() public onItemChange: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>(false);\r\n\t@Output() public onDragStart: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onDrag: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onDragStop: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onDragAny: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResizeStart: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResize: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResizeStop: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResizeAny: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChangeStart: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChange: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChangeStop: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChangeAny: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public ngGridItemChange: EventEmitter<NgGridItemConfig> = new EventEmitter<NgGridItemConfig>();\r\n\r\n\t//\tDefault config\r\n\tprivate static CONST_DEFAULT_CONFIG: NgGridItemConfig = {\r\n\t\tuid: null,\r\n\t\tcol: 1,\r\n\t\trow: 1,\r\n\t\tsizex: 1,\r\n\t\tsizey: 1,\r\n\t\tdragHandle: null,\r\n\t\tresizeHandle: null,\r\n\t\tfixed: false,\r\n\t\tdraggable: true,\r\n\t\tresizable: true,\r\n\t\tborderSize: 25\r\n\t};\r\n\r\n\tpublic isFixed: boolean = false;\r\n\tpublic isDraggable: boolean = true;\r\n\tpublic isResizable: boolean = true;\r\n\tpublic minWidth: number = 0;\r\n\tpublic minHeight: number = 0;\r\n\tpublic uid: string = null;\r\n\r\n\t//\tPrivate variables\r\n\tprivate _payload: any;\r\n\tprivate _currentPosition: NgGridItemPosition = { col: 1, row: 1 };\r\n\tprivate _size: NgGridItemSize = { x: 1, y: 1 };\r\n\tprivate _config = NgGridItem.CONST_DEFAULT_CONFIG;\r\n\tprivate _userConfig = null;\r\n\tprivate _dragHandle: string;\r\n\tprivate _resizeHandle: ResizeHandle;\r\n\tprivate _borderSize: number;\r\n\tprivate _elemWidth: number;\r\n\tprivate _elemHeight: number;\r\n\tprivate _elemLeft: number;\r\n\tprivate _elemTop: number;\r\n\tprivate _added: boolean = false;\r\n\tprivate _differ: KeyValueDiffer<string, any>;\r\n\tprivate _cascadeMode: string;\r\n\tprivate _maxCols: number = 0;\r\n\tprivate _minCols: number = 0;\r\n\tprivate _maxRows: number = 0;\r\n\tprivate _minRows: number = 0;\r\n\r\n\t//\t[ng-grid-item] handler\r\n\tset config(v: NgGridItemConfig) {\r\n\t\tthis._userConfig = v;\r\n\r\n\t\tconst configObject = Object.assign({}, NgGridItem.CONST_DEFAULT_CONFIG, v);\r\n\t\tfor (let x in NgGridItem.CONST_DEFAULT_CONFIG)\r\n\t\t\tif (configObject[x] == null)\r\n\t\t\t\tconfigObject[x] = NgGridItem.CONST_DEFAULT_CONFIG[x];\r\n\r\n\t\tthis.setConfig(configObject);\r\n\r\n\t\tif (this._userConfig != null) {\r\n\t\t\tif (this._differ == null) {\r\n\t\t\t\tthis._differ = this._differs.find(this._userConfig).create();\r\n\t\t\t}\r\n\r\n\t\t\tthis._differ.diff(this._userConfig);\r\n\t\t}\r\n\r\n\t\tif (!this._added) {\r\n\t\t\tthis._added = true;\r\n\t\t\tthis._ngGrid.addItem(this);\r\n\t\t}\r\n\r\n\t\tthis._recalculateDimensions();\r\n\t\tthis._recalculatePosition();\r\n\t}\r\n\r\n\tget sizex(): number {\r\n\t\treturn this._size.x;\r\n\t}\r\n\r\n\tget sizey(): number {\r\n\t\treturn this._size.y;\r\n\t}\r\n\r\n\tget col(): number {\r\n\t\treturn this._currentPosition.col;\r\n\t}\r\n\r\n\tget row(): number {\r\n\t\treturn this._currentPosition.row;\r\n\t}\r\n\r\n\tget currentCol(): number {\r\n\t\treturn this._currentPosition.col;\r\n\t}\r\n\r\n\tget currentRow(): number {\r\n\t\treturn this._currentPosition.row;\r\n\t}\r\n\r\n\t//\tConstructor\r\n\tconstructor(\r\n\t\tprivate _differs: KeyValueDiffers,\r\n\t\tprivate _ngEl: ElementRef,\r\n\t\tprivate _renderer: Renderer2,\r\n\t\tprivate _ngGrid: NgGrid,\r\n\t\tpublic containerRef: ViewContainerRef,\r\n\t) { }\r\n\r\n\tpublic onResizeStartEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onResizeStart.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChangeStart.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onResizeEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onResize.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChange.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onResizeStopEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onResizeStop.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChangeStop.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\r\n\t\tthis.onConfigChangeEvent();\r\n\t}\r\n\tpublic onDragStartEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onDragStart.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChangeStart.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onDragEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onDrag.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChange.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onDragStopEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onDragStop.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChangeStop.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\r\n\t\tthis.onConfigChangeEvent();\r\n\t}\r\n\tpublic onCascadeEvent(): void {\r\n\t\tthis.onConfigChangeEvent();\r\n\t}\r\n\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._renderer.addClass(this._ngEl.nativeElement, 'grid-item');\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setStyle(this._ngEl.nativeElement, 'position', 'absolute');\r\n\t\tthis._recalculateDimensions();\r\n\t\tthis._recalculatePosition();\r\n\r\n\t\t//\tForce a config update in case there is no config assigned\r\n\t\tthis.config = this._userConfig;\r\n\t}\r\n\r\n\t//\tPublic methods\r\n\tpublic canDrag(e: any): boolean {\r\n\t\tif (!this.isDraggable) return false;\r\n\r\n\t\tif (this._dragHandle) {\r\n\t\t\treturn this.findHandle(this._dragHandle, e.target);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic findHandle(handleSelector: string, startElement: HTMLElement): boolean {\r\n\t\ttry {\r\n\t\t\tlet targetElem: any = startElement;\r\n\r\n\t\t\twhile (targetElem && targetElem != this._ngEl.nativeElement) {\r\n\t\t\t\tif (this.elementMatches(targetElem, handleSelector)) return true;\r\n\r\n\t\t\t\ttargetElem = targetElem.parentElement;\r\n\t\t\t}\r\n\t\t} catch (err) {}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic canResize(e: any): string {\r\n\t\tif (!this.isResizable) return null;\r\n\r\n\t\tif (this._resizeHandle) {\r\n\t\t\tif (typeof this._resizeHandle === \"string\") {\r\n\t\t\t\treturn this.findHandle(this._resizeHandle, e.target) ? 'bottomright' : null;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof this._resizeHandle !== \"object\") return null;\r\n\r\n\t\t\tconst resizeDirections = [ 'bottomright', 'bottomleft', 'topright', 'topleft', 'right', 'left', 'bottom', 'top' ];\r\n\t\t\tfor (let direction of resizeDirections) {\r\n\t\t\t\tif (direction in this._resizeHandle) {\r\n\t\t\t\t\tif (this.findHandle(this._resizeHandle[direction], e.target)) {\r\n\t\t\t\t\t\treturn direction;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (this._borderSize <= 0) return null;\r\n\r\n\t\tconst mousePos: NgGridRawPosition = this._getMousePosition(e);\r\n\r\n\t\tif (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize\r\n\t\t\t&& mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn 'bottomright';\r\n\t\t} else if (mousePos.left < this._borderSize && mousePos.top < this._elemHeight\r\n\t\t\t&& mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn 'bottomleft';\r\n\t\t} else if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize\r\n\t\t\t&& mousePos.top < this._borderSize) {\r\n\t\t\treturn 'topright';\r\n\t\t} else if (mousePos.left < this._borderSize && mousePos.top < this._borderSize) {\r\n\t\t\treturn 'topleft';\r\n\t\t} else if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize) {\r\n\t\t\treturn 'right';\r\n\t\t} else if (mousePos.left < this._borderSize) {\r\n\t\t\treturn 'left';\r\n\t\t} else if (mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn 'bottom';\r\n\t\t} else if (mousePos.top < this._borderSize) {\r\n\t\t\treturn 'top';\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic onMouseMove(e: any): void {\r\n\t\tif (this._ngGrid.autoStyle) {\r\n\t\t\tif (this._ngGrid.resizeEnable) {\r\n\t\t\t\tconst resizeDirection = this.canResize(e);\r\n\r\n\t\t\t\tlet cursor: string = \"default\";\r\n\t\t\t\tswitch (resizeDirection) {\r\n\t\t\t\t\tcase \"bottomright\":\r\n\t\t\t\t\tcase \"topleft\":\r\n\t\t\t\t\t\tcursor = \"nwse-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"topright\":\r\n\t\t\t\t\tcase \"bottomleft\":\r\n\t\t\t\t\t\tcursor = \"nesw-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\tcursor = \"ns-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\tcursor = \"ew-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif (this._ngGrid.dragEnable && this.canDrag(e)) {\r\n\t\t\t\t\t\t\tcursor = 'move';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'cursor', cursor);\r\n\t\t\t} else if (this._ngGrid.dragEnable && this.canDrag(e)) {\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'cursor', 'move');\r\n\t\t\t} else {\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'cursor', 'default');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic ngOnDestroy(): void {\r\n\t\tif (this._added) this._ngGrid.removeItem(this);\r\n\t}\r\n\r\n\t//\tGetters\r\n\tpublic getElement(): ElementRef {\r\n\t\treturn this._ngEl;\r\n\t}\r\n\r\n\tpublic getDragHandle(): string {\r\n\t\treturn this._dragHandle;\r\n\t}\r\n\r\n\tpublic getResizeHandle(): ResizeHandle {\r\n\t\treturn this._resizeHandle;\r\n\t}\r\n\r\n\tpublic getDimensions(): NgGridItemDimensions {\r\n\t\treturn { 'width': this._elemWidth, 'height': this._elemHeight };\r\n\t}\r\n\r\n\tpublic getSize(): NgGridItemSize {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic getPosition(): NgGridRawPosition {\r\n\t\treturn { 'left': this._elemLeft, 'top': this._elemTop };\r\n\t}\r\n\r\n\tpublic getGridPosition(): NgGridItemPosition {\r\n\t\treturn this._currentPosition;\r\n\t}\r\n\r\n\t//\tSetters\r\n\tpublic setConfig(config: NgGridItemConfig): void {\r\n\t\tthis._config = config;\r\n\r\n\t\tthis._payload = config.payload;\r\n\t\tthis._currentPosition.col = config.col ? config.col : NgGridItem.CONST_DEFAULT_CONFIG.col;\r\n\t\tthis._currentPosition.row = config.row ? config.row : NgGridItem.CONST_DEFAULT_CONFIG.row;\r\n\t\tthis._size.x = config.sizex ? config.sizex : NgGridItem.CONST_DEFAULT_CONFIG.sizex;\r\n\t\tthis._size.y = config.sizey ? config.sizey : NgGridItem.CONST_DEFAULT_CONFIG.sizey;\r\n\t\tthis._dragHandle = config.dragHandle;\r\n\t\tthis._resizeHandle = config.resizeHandle;\r\n\t\tthis._borderSize = config.borderSize;\r\n\t\tthis.isDraggable = config.draggable ? true : false;\r\n\t\tthis.isResizable = config.resizable ? true : false;\r\n\t\tthis.isFixed = config.fixed ? true : false;\r\n\r\n\t\tthis._maxCols = !isNaN(config.maxCols) && isFinite(config.maxCols) ? config.maxCols : 0;\r\n\t\tthis._minCols = !isNaN(config.minCols) && isFinite(config.minCols) ? config.minCols : 0;\r\n\t\tthis._maxRows = !isNaN(config.maxRows) && isFinite(config.maxRows) ? config.maxRows : 0;\r\n\t\tthis._minRows = !isNaN(config.minRows) && isFinite(config.minRows) ? config.minRows : 0;\r\n\r\n\t\tthis.minWidth = !isNaN(config.minWidth) && isFinite(config.minWidth) ? config.minWidth : 0;\r\n\t\tthis.minHeight = !isNaN(config.minHeight) && isFinite(config.minHeight) ? config.minHeight : 0;\r\n\r\n\t\tif (this._minCols > 0 && this._maxCols > 0 && this._minCols > this._maxCols) this._minCols = 0;\r\n\t\tif (this._minRows > 0 && this._maxRows > 0 && this._minRows > this._maxRows) this._minRows = 0;\r\n\r\n\t\tif (this._added) {\r\n\t\t\tthis._ngGrid.updateItem(this);\r\n\t\t}\r\n\r\n\t\tthis._size = this.fixResize(this._size);\r\n\r\n\t\tthis._recalculatePosition();\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic ngDoCheck(): boolean {\r\n\t\tif (this._differ != null) {\r\n\t\t\tconst changes: any = this._differ.diff(this._userConfig);\r\n\r\n\t\t\tif (changes != null) {\r\n\t\t\t\treturn this._applyChanges(changes);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic setSize(newSize: NgGridItemSize, update: boolean = true): void {\r\n\t\tnewSize = this.fixResize(newSize);\r\n\t\tthis._size = newSize;\r\n\t\tif (update) this._recalculateDimensions();\r\n\r\n\t\tthis.onItemChange.emit(this.getEventOutput());\r\n\t}\r\n\r\n\tpublic setGridPosition(gridPosition: NgGridItemPosition, update: boolean = true): void {\r\n\t\tthis._currentPosition = gridPosition;\r\n\t\tif (update) this._recalculatePosition();\r\n\r\n\t\tthis.onItemChange.emit(this.getEventOutput());\r\n\t}\r\n\r\n\tpublic getEventOutput(): NgGridItemEvent {\r\n\t\treturn <NgGridItemEvent>{\r\n\t\t\tuid: this.uid,\r\n\t\t\tpayload: this._payload,\r\n\t\t\tcol: this._currentPosition.col,\r\n\t\t\trow: this._currentPosition.row,\r\n\t\t\tsizex: this._size.x,\r\n\t\t\tsizey: this._size.y,\r\n\t\t\twidth: this._elemWidth,\r\n\t\t\theight: this._elemHeight,\r\n\t\t\tleft: this._elemLeft,\r\n\t\t\ttop: this._elemTop\r\n\t\t};\r\n\t}\r\n\r\n\tpublic setPosition(x: number, y: number): void {\r\n\t\tswitch (this._cascadeMode) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', x + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', y + 'px');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', x + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', y + 'px');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', x + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', y + 'px');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._elemLeft = x;\r\n\t\tthis._elemTop = y;\r\n\t}\r\n\r\n\tpublic setCascadeMode(cascade: string): void {\r\n\t\tthis._cascadeMode = cascade;\r\n\t\tswitch (cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', this._elemLeft + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', this._elemTop + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', this._elemLeft + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', this._elemTop + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', null);\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', this._elemLeft + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', this._elemTop + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', null);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setDimensions(w: number, h: number): void {\r\n\t\tif (w < this.minWidth) w = this.minWidth;\r\n\t\tif (h < this.minHeight) h = this.minHeight;\r\n\r\n\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'width', w + 'px');\r\n\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'height', h + 'px');\r\n\r\n\t\tthis._elemWidth = w;\r\n\t\tthis._elemHeight = h;\r\n\t}\r\n\r\n\tpublic startMoving(): void {\r\n\t\tthis._renderer.addClass(this._ngEl.nativeElement, 'moving');\r\n\t\tconst style: any = window.getComputedStyle(this._ngEl.nativeElement);\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setStyle(this._ngEl.nativeElement, 'z-index', (parseInt(style.getPropertyValue('z-index')) + 1).toString());\r\n\t}\r\n\r\n\tpublic stopMoving(): void {\r\n\t\tthis._renderer.removeClass(this._ngEl.nativeElement, 'moving');\r\n\t\tconst style: any = window.getComputedStyle(this._ngEl.nativeElement);\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setStyle(this._ngEl.nativeElement, 'z-index', (parseInt(style.getPropertyValue('z-index')) - 1).toString());\r\n\t}\r\n\r\n\tpublic recalculateSelf(): void {\r\n\t\tthis._recalculatePosition();\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic fixResize(newSize: NgGridItemSize): NgGridItemSize {\r\n\t\tif (this._maxCols > 0 && newSize.x > this._maxCols) newSize.x = this._maxCols;\r\n\t\tif (this._maxRows > 0 && newSize.y > this._maxRows) newSize.y = this._maxRows;\r\n\r\n\t\tif (this._minCols > 0 && newSize.x < this._minCols) newSize.x = this._minCols;\r\n\t\tif (this._minRows > 0 && newSize.y < this._minRows) newSize.y = this._minRows;\r\n\r\n\t\tconst itemWidth = (newSize.x * this._ngGrid.colWidth) + ((this._ngGrid.marginLeft + this._ngGrid.marginRight) * (newSize.x - 1));\r\n\t\tif (itemWidth < this.minWidth) newSize.x = Math.ceil((this.minWidth + this._ngGrid.marginRight + this._ngGrid.marginLeft) / (this._ngGrid.colWidth + this._ngGrid.marginRight + this._ngGrid.marginLeft));\r\n\r\n\t\tconst itemHeight = (newSize.y * this._ngGrid.rowHeight) + ((this._ngGrid.marginTop + this._ngGrid.marginBottom) * (newSize.y - 1));\r\n\t\tif (itemHeight < this.minHeight) newSize.y = Math.ceil((this.minHeight + this._ngGrid.marginBottom + this._ngGrid.marginTop) / (this._ngGrid.rowHeight + this._ngGrid.marginBottom + this._ngGrid.marginTop));\r\n\r\n\t\treturn newSize;\r\n\t}\r\n\r\n\t//\tPrivate methods\r\n\tprivate elementMatches(element: any, selector: string): boolean {\r\n\t\tif (!element) return false;\r\n\t\tif (element.matches) return element.matches(selector);\r\n\t\tif (element.oMatchesSelector) return element.oMatchesSelector(selector);\r\n\t\tif (element.msMatchesSelector) return element.msMatchesSelector(selector);\r\n\t\tif (element.mozMatchesSelector) return element.mozMatchesSelector(selector);\r\n\t\tif (element.webkitMatchesSelector) return element.webkitMatchesSelector(selector);\r\n\r\n\t\tif (!element.document || !element.ownerDocument) return false;\r\n\r\n\t\tconst matches: any = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n\t\tlet i: number = matches.length;\r\n\t\twhile (--i >= 0 && matches.item(i) !== element) { }\r\n\t\treturn i > -1;\r\n\t}\r\n\r\n\tprivate _recalculatePosition(): void {\r\n\t\tconst x: number = (this._ngGrid.colWidth + this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._currentPosition.col - 1) + this._ngGrid.marginLeft + this._ngGrid.screenMargin;\r\n\t\tconst y: number = (this._ngGrid.rowHeight + this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._currentPosition.row - 1) + this._ngGrid.marginTop;\r\n\r\n\t\tthis.setPosition(x, y);\r\n\t}\r\n\r\n\tprivate _recalculateDimensions(): void {\r\n\t\tif (this._size.x < this._ngGrid.minCols) this._size.x = this._ngGrid.minCols;\r\n\t\tif (this._size.y < this._ngGrid.minRows) this._size.y = this._ngGrid.minRows;\r\n\r\n\t\tconst newWidth: number = (this._ngGrid.colWidth * this._size.x) + ((this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._size.x - 1));\r\n\t\tconst newHeight: number = (this._ngGrid.rowHeight * this._size.y) + ((this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._size.y - 1));\r\n\r\n\t\tconst w: number = Math.max(this.minWidth, this._ngGrid.minWidth, newWidth);\r\n\t\tconst h: number = Math.max(this.minHeight, this._ngGrid.minHeight, newHeight);\r\n\r\n\t\tthis.setDimensions(w, h);\r\n\t}\r\n\r\n\tprivate _getMousePosition(e: any): NgGridRawPosition {\r\n\t\tif (e.originalEvent && e.originalEvent.touches) {\r\n\t\t\tconst oe: any = e.originalEvent;\r\n\t\t\te = oe.touches.length ? oe.touches[0] : (oe.changedTouches.length ? oe.changedTouches[0] : e);\r\n\t\t} else if (e.touches) {\r\n\t\t\te = e.touches.length ? e.touches[0] : (e.changedTouches.length ? e.changedTouches[0] : e);\r\n\t\t}\r\n\r\n\r\n\t\tconst refPos: NgGridRawPosition = this._ngEl.nativeElement.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tleft: e.clientX - refPos.left,\r\n\t\t\ttop: e.clientY - refPos.top\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _applyChanges(changes: any): boolean {\r\n\t\tlet changed: boolean = false;\r\n\t\tconst changeCheck = (record: any) => {\r\n\t\t\tif (this._config[record.key] !== record.currentValue) {\r\n\t\t\t\tthis._config[record.key] = record.currentValue;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\t\t};\r\n\t\tchanges.forEachAddedItem(changeCheck);\r\n\t\tchanges.forEachChangedItem(changeCheck);\r\n\t\tchanges.forEachRemovedItem((record: any) => {\r\n\t\t\tchanged = true;\r\n\t\t\tdelete this._config[record.key];\r\n\t\t});\r\n\r\n\t\tif (changed) {\r\n\t\t\tthis.setConfig(this._config);\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tprivate onConfigChangeEvent() {\r\n\t\tif (this._userConfig === null) return;\r\n\r\n\t\tthis._config.sizex = this._userConfig.sizex = this._size.x;\r\n\t\tthis._config.sizey = this._userConfig.sizey = this._size.y;\r\n\t\tthis._config.col = this._userConfig.col = this._currentPosition.col;\r\n\t\tthis._config.row = this._userConfig.row = this._currentPosition.row;\r\n\t\tthis.ngGridItemChange.emit(this._userConfig);\r\n\t}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { NgGrid } from '../directives/NgGrid';\r\nimport { NgGridItem } from '../directives/NgGridItem';\r\nimport { NgGridPlaceholder } from '../components/NgGridPlaceholder';\r\n\r\n@NgModule({\r\n  declarations:     [ NgGrid, NgGridItem, NgGridPlaceholder ],\r\n  entryComponents:  [ NgGridPlaceholder ],\r\n  exports:          [ NgGrid, NgGridItem ]\r\n})\r\nexport class NgGridModule {}"],"names":["NgGridHelper.generateUuid","tslib_1.__values","NgGridHelper.sortItemsByPositionVertical","NgGridHelper.sortItemsByPositionHorizontal"],"mappings":"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"}

{"version":3,"file":"angular2-grid.umd.js.map","sources":[null,"ng://angular2-grid/helpers/NgGridHelpers.ts","ng://angular2-grid/components/NgGridPlaceholder.ts","ng://angular2-grid/directives/NgGrid.ts","ng://angular2-grid/directives/NgGridItem.ts","ng://angular2-grid/modules/NgGrid.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { NgGridItem } from \"../directives/NgGridItem\";\r\n\r\nexport function generateUuid(): string {\r\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n\t\treturn v.toString(16);\r\n\t});\r\n}\r\n\r\nexport function sortItemsByPositionHorizontal(a: NgGridItem, b: NgGridItem): number {\r\n\tif (a.col === b.col) { return a.row - b.row; }\r\n\treturn a.col - b.col;\r\n}\r\n\r\nexport function sortItemsByPositionVertical(a: NgGridItem, b: NgGridItem): number {\r\n\tif (a.row === b.row) { return a.col - b.col; }\r\n\treturn a.row - b.row;\r\n}","import { NgGrid } from '../directives/NgGrid';\r\nimport { NgGridItem } from '../directives/NgGridItem';\r\nimport { NgGridItemPosition, NgGridItemSize } from '../interfaces/INgGrid';\r\nimport { Component, Directive, ElementRef, Renderer, EventEmitter, Host, ViewEncapsulation, Type, ComponentRef, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, DoCheck, ViewContainerRef, Output } from '@angular/core';\r\n\r\n@Component({\r\n\tselector: 'ng-grid-placeholder',\r\n\ttemplate: ''\r\n})\r\nexport class NgGridPlaceholder implements OnInit {\r\n\tprivate _size: NgGridItemSize;\r\n\tprivate _position: NgGridItemPosition;\r\n\tprivate _ngGrid: NgGrid;\r\n\tprivate _cascadeMode: string;\r\n\r\n\tconstructor(private _ngEl: ElementRef, private _renderer: Renderer) { }\r\n\r\n\tpublic registerGrid(ngGrid: NgGrid) {\r\n\t\tthis._ngGrid = ngGrid;\r\n\t}\r\n\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, 'grid-placeholder', true);\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setElementStyle(this._ngEl.nativeElement, 'position', 'absolute');\r\n\t}\r\n\r\n\tpublic setSize(newSize: NgGridItemSize): void {\r\n\t\tthis._size = newSize;\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic setGridPosition(newPosition: NgGridItemPosition): void {\r\n\t\tthis._position = newPosition;\r\n\t\tthis._recalculatePosition();\r\n\t}\r\n\r\n\tpublic setCascadeMode(cascade: string): void {\r\n\t\tthis._cascadeMode = cascade;\r\n\t\tswitch (cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'left', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'top', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'right', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'top', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'left', null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'left', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'bottom', '0px');\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'top', null);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//\tPrivate methods\r\n\tprivate _setDimensions(w: number, h: number): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'width', w + 'px');\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'height', h + 'px');\r\n\t}\r\n\r\n\tprivate _setPosition(x: number, y: number): void {\r\n\t\tswitch (this._cascadeMode) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'translate(' + x + 'px, ' + y + 'px)');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'translate(' + -x + 'px, ' + y + 'px)');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'translate(' + x + 'px, ' + -y + 'px)');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _recalculatePosition(): void {\r\n\t\tconst x: number = (this._ngGrid.colWidth + this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._position.col - 1) + this._ngGrid.marginLeft + this._ngGrid.screenMargin;\r\n\t\tconst y: number = (this._ngGrid.rowHeight + this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._position.row - 1) + this._ngGrid.marginTop;\r\n\t\tthis._setPosition(x, y);\r\n\t}\r\n\r\n\tprivate _recalculateDimensions(): void {\r\n\t\tconst w: number = (this._ngGrid.colWidth * this._size.x) + ((this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._size.x - 1));\r\n\t\tconst h: number = (this._ngGrid.rowHeight * this._size.y) + ((this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._size.y - 1));\r\n\t\tthis._setDimensions(w, h);\r\n\t}\r\n}\r\n","import { Component, Directive, ElementRef, Renderer, EventEmitter, ComponentFactoryResolver, Host, ViewEncapsulation, Type, ComponentRef, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, DoCheck, ViewContainerRef, Output } from '@angular/core';\r\nimport { NgGridConfig, NgGridItemEvent, NgGridItemPosition, NgGridItemSize, NgGridRawPosition, NgGridItemDimensions, NgConfigFixDirection } from '../interfaces/INgGrid';\r\nimport { NgGridItem } from './NgGridItem';\r\nimport * as NgGridHelper from \"../helpers/NgGridHelpers\";\r\nimport { NgGridPlaceholder } from '../components/NgGridPlaceholder';\r\nimport { Subscription, Observable, fromEvent } from 'rxjs';\r\n\r\n@Directive({\r\n\tselector: '[ngGrid]',\r\n\tinputs: ['config: ngGrid'],\r\n\thost: {\r\n\t\t'(window:resize)': 'resizeEventHandler($event)',\r\n\t}\r\n})\r\nexport class NgGrid implements OnInit, DoCheck, OnDestroy {\r\n\t//\tEvent Emitters\r\n\t@Output() public onDragStart: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onDrag: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onDragStop: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onResizeStart: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onResize: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onResizeStop: EventEmitter<NgGridItem> = new EventEmitter<NgGridItem>();\r\n\t@Output() public onItemChange: EventEmitter<Array<NgGridItemEvent>> = new EventEmitter<Array<NgGridItemEvent>>();\r\n\r\n\t//\tPublic variables\r\n\tpublic colWidth: number = 250;\r\n\tpublic rowHeight: number = 250;\r\n\tpublic minCols: number = 1;\r\n\tpublic minRows: number = 1;\r\n\tpublic marginTop: number = 10;\r\n\tpublic marginRight: number = 10;\r\n\tpublic marginBottom: number = 10;\r\n\tpublic marginLeft: number = 10;\r\n\tpublic screenMargin: number = 0;\r\n\tpublic isDragging: boolean = false;\r\n\tpublic isResizing: boolean = false;\r\n\tpublic autoStyle: boolean = true;\r\n\tpublic resizeEnable: boolean = true;\r\n\tpublic dragEnable: boolean = true;\r\n\tpublic cascade: string = 'up';\r\n\tpublic minWidth: number = 100;\r\n\tpublic minHeight: number = 100;\r\n\r\n\t//\tPrivate variables\r\n\tprivate _items: Map<string, NgGridItem> = new Map<string, NgGridItem>();\r\n\tprivate _draggingItem: NgGridItem = null;\r\n\tprivate _resizingItem: NgGridItem = null;\r\n\tprivate _resizeDirection: string = null;\r\n\tprivate _itemsInGrid: Set<string> = new Set<string>();\r\n\tprivate _containerWidth: number;\r\n\tprivate _containerHeight: number;\r\n\tprivate _maxCols: number = 0;\r\n\tprivate _maxRows: number = 0;\r\n\tprivate _visibleCols: number = 0;\r\n\tprivate _visibleRows: number = 0;\r\n\tprivate _setWidth: number = 250;\r\n\tprivate _setHeight: number = 250;\r\n\tprivate _posOffset: NgGridRawPosition = null;\r\n\tprivate _adding: boolean = false;\r\n\tprivate _placeholderRef: ComponentRef<NgGridPlaceholder> = null;\r\n\tprivate _fixToGrid: boolean = false;\r\n\tprivate _autoResize: boolean = false;\r\n\tprivate _differ: KeyValueDiffer<string, any>;\r\n\tprivate _destroyed: boolean = false;\r\n\tprivate _maintainRatio: boolean = false;\r\n\tprivate _aspectRatio: number;\r\n\tprivate _preferNew: boolean = false;\r\n\tprivate _zoomOnDrag: boolean = false;\r\n\tprivate _limitToScreen: boolean = false;\r\n\tprivate _centerToScreen: boolean = false;\r\n\tprivate _curMaxRow: number = 0;\r\n\tprivate _curMaxCol: number = 0;\r\n\tprivate _dragReady: boolean = false;\r\n\tprivate _resizeReady: boolean = false;\r\n\tprivate _elementBasedDynamicRowHeight: boolean = false;\r\n\tprivate _itemFixDirection: NgConfigFixDirection = \"cascade\";\r\n\tprivate _collisionFixDirection: NgConfigFixDirection = \"cascade\";\r\n\tprivate _cascadePromise: Promise<void>;\r\n\r\n\t// Events\r\n\tprivate _documentMousemove$: Observable<MouseEvent>;\r\n\tprivate _documentMouseup$: Observable<MouseEvent>;\r\n\tprivate _mousedown$: Observable<MouseEvent>;\r\n\tprivate _mousemove$: Observable<MouseEvent>;\r\n\tprivate _mouseup$: Observable<MouseEvent>;\r\n\tprivate _touchstart$: Observable<TouchEvent>;\r\n\tprivate _touchmove$: Observable<TouchEvent>;\r\n\tprivate _touchend$: Observable<TouchEvent>;\r\n\tprivate _subscriptions: Subscription[] = [];\r\n\r\n\tprivate _enabledListener: boolean = false;\r\n\r\n\t//\tDefault config\r\n\tprivate static CONST_DEFAULT_CONFIG: NgGridConfig = {\r\n\t\tmargins: [10],\r\n\t\tdraggable: true,\r\n\t\tresizable: true,\r\n\t\tmax_cols: 0,\r\n\t\tmax_rows: 0,\r\n\t\tvisible_cols: 0,\r\n\t\tvisible_rows: 0,\r\n\t\tcol_width: 250,\r\n\t\trow_height: 250,\r\n\t\tcascade: 'up',\r\n\t\tmin_width: 100,\r\n\t\tmin_height: 100,\r\n\t\tfix_to_grid: false,\r\n\t\tauto_style: true,\r\n\t\tauto_resize: false,\r\n\t\tmaintain_ratio: false,\r\n\t\tprefer_new: false,\r\n\t\tzoom_on_drag: false,\r\n\t\tlimit_to_screen: false,\r\n\t\tcenter_to_screen: false,\r\n\t\telement_based_row_height: false,\r\n\t\tfix_item_position_direction: \"cascade\",\r\n\t\tfix_collision_position_direction: \"cascade\",\r\n\t};\r\n\tprivate _config = NgGrid.CONST_DEFAULT_CONFIG;\r\n\r\n\t//\t[ng-grid] attribute handler\r\n\tset config(v: NgGridConfig) {\r\n\t\tif (v == null || typeof v !== \"object\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setConfig(v);\r\n\r\n\t\tif (this._differ == null && v != null) {\r\n\t\t\tthis._differ = this._differs.find(this._config).create();\r\n\t\t}\r\n\r\n\t\tthis._differ.diff(this._config);\r\n\t}\r\n\r\n\t//\tConstructor\r\n\tconstructor(\r\n\t\tprivate _differs: KeyValueDiffers,\r\n\t\tprivate _ngEl: ElementRef,\r\n\t\tprivate _renderer: Renderer,\r\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\r\n\t) {\r\n\t\tthis._defineListeners();\r\n\t}\r\n\r\n\t//\tPublic methods\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._renderer.setElementClass(this._ngEl.nativeElement, 'grid', true);\r\n\t\tif (this.autoStyle) this._renderer.setElementStyle(this._ngEl.nativeElement, 'position', 'relative');\r\n\t\tthis.setConfig(this._config);\r\n\t}\r\n\r\n\tpublic ngOnDestroy(): void {\r\n\t\tthis._destroyed = true;\r\n\t\tthis._disableListeners();\r\n\t}\r\n\r\n\tpublic generateItemUid(): string {\r\n\t\tconst uid: string = NgGridHelper.generateUuid();\r\n\r\n\t\tif (this._items.has(uid)) {\r\n\t\t\treturn this.generateItemUid();\r\n\t\t}\r\n\r\n\t\treturn uid;\r\n\t}\r\n\r\n\tpublic setConfig(config: NgGridConfig): void {\r\n\t\tthis._config = config;\r\n\r\n\t\tvar maxColRowChanged = false;\r\n\t\tfor (var x in config) {\r\n\t\t\tvar val = config[x];\r\n\t\t\tvar intVal = !val ? 0 : parseInt(val);\r\n\r\n\t\t\tswitch (x) {\r\n\t\t\t\tcase 'margins':\r\n\t\t\t\t\tthis.setMargins(val);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'col_width':\r\n\t\t\t\t\tthis.colWidth = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'row_height':\r\n\t\t\t\t\tthis.rowHeight = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'auto_style':\r\n\t\t\t\t\tthis.autoStyle = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'auto_resize':\r\n\t\t\t\t\tthis._autoResize = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'draggable':\r\n\t\t\t\t\tthis.dragEnable = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'resizable':\r\n\t\t\t\t\tthis.resizeEnable = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'max_rows':\r\n\t\t\t\t\tmaxColRowChanged = maxColRowChanged || this._maxRows != intVal;\r\n\t\t\t\t\tthis._maxRows = intVal < 0 ? 0 : intVal;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'max_cols':\r\n\t\t\t\t\tmaxColRowChanged = maxColRowChanged || this._maxCols != intVal;\r\n\t\t\t\t\tthis._maxCols = intVal < 0 ? 0 : intVal;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'visible_rows':\r\n\t\t\t\t\tthis._visibleRows = Math.max(intVal, 0);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'visible_cols':\r\n\t\t\t\t\tthis._visibleCols = Math.max(intVal, 0);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_rows':\r\n\t\t\t\t\tthis.minRows = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_cols':\r\n\t\t\t\t\tthis.minCols = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_height':\r\n\t\t\t\t\tthis.minHeight = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'min_width':\r\n\t\t\t\t\tthis.minWidth = Math.max(intVal, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'zoom_on_drag':\r\n\t\t\t\t\tthis._zoomOnDrag = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'cascade':\r\n\t\t\t\t\tif (this.cascade != val) {\r\n\t\t\t\t\t\tthis.cascade = val;\r\n\t\t\t\t\t\tthis._cascadeGrid();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fix_to_grid':\r\n\t\t\t\t\tthis._fixToGrid = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'maintain_ratio':\r\n\t\t\t\t\tthis._maintainRatio = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'prefer_new':\r\n\t\t\t\t\tthis._preferNew = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'limit_to_screen':\r\n\t\t\t\t\tthis._limitToScreen = !this._autoResize && !!val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'center_to_screen':\r\n\t\t\t\t\tthis._centerToScreen = val ? true : false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'element_based_row_height':\r\n\t\t\t\t\tthis._elementBasedDynamicRowHeight = !!val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fix_item_position_direction':\r\n\t\t\t\t\tthis._itemFixDirection = val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'fix_collision_position_direction':\r\n\t\t\t\t\tthis._collisionFixDirection = val;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.dragEnable || this.resizeEnable) {\r\n\t\t\tthis._enableListeners();\r\n\t\t} else {\r\n\t\t\tthis._disableListeners();\r\n\t\t}\r\n\r\n\t\tif (this._itemFixDirection === \"cascade\") {\r\n\t\t\tthis._itemFixDirection = this._getFixDirectionFromCascade();\r\n\t\t}\r\n\r\n\t\tif (this._collisionFixDirection === \"cascade\") {\r\n\t\t\tthis._collisionFixDirection = this._getFixDirectionFromCascade();\r\n\t\t}\r\n\r\n\t\tif (this._limitToScreen) {\r\n\t\t\tconst newMaxCols = this._getContainerColumns();\r\n\r\n\t\t\tif (this._maxCols != newMaxCols) {\r\n\t\t\t\tthis._maxCols = newMaxCols;\r\n\t\t\t\tmaxColRowChanged = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._limitToScreen && this._centerToScreen) {\r\n\t\t\tthis.screenMargin = this._getScreenMargin();\r\n\t\t} else {\r\n\t\t\tthis.screenMargin = 0;\r\n\t\t}\r\n\r\n\t\tif (this._maintainRatio) {\r\n\t\t\tif (this.colWidth && this.rowHeight) {\r\n\t\t\t\tthis._aspectRatio = this.colWidth / this.rowHeight;\r\n\t\t\t} else {\r\n\t\t\t\tthis._maintainRatio = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (maxColRowChanged) {\r\n\t\t\tif (this._maxCols > 0 && this._maxRows > 0) {\t//\tCan't have both, prioritise on cascade\r\n\t\t\t\tswitch (this.cascade) {\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\tthis._maxCols = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\tcase 'down':\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis._maxRows = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._updatePositionsAfterMaxChange();\r\n\t\t}\r\n\r\n\t\tthis._calculateColWidth();\r\n\t\tthis._calculateRowHeight();\r\n\r\n\t\tvar maxWidth = this._maxCols * this.colWidth;\r\n\t\tvar maxHeight = this._maxRows * this.rowHeight;\r\n\r\n\t\tif (maxWidth > 0 && this.minWidth > maxWidth) this.minWidth = 0.75 * this.colWidth;\r\n\t\tif (maxHeight > 0 && this.minHeight > maxHeight) this.minHeight = 0.75 * this.rowHeight;\r\n\r\n\t\tif (this.minWidth > this.colWidth) this.minCols = Math.max(this.minCols, Math.ceil(this.minWidth / this.colWidth));\r\n\t\tif (this.minHeight > this.rowHeight) this.minRows = Math.max(this.minRows, Math.ceil(this.minHeight / this.rowHeight));\r\n\r\n\t\tif (this._maxCols > 0 && this.minCols > this._maxCols) this.minCols = 1;\r\n\t\tif (this._maxRows > 0 && this.minRows > this._maxRows) this.minRows = 1;\r\n\r\n\t\tthis._updateRatio();\r\n\r\n\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\tthis._removeFromGrid(item);\r\n\t\t\titem.setCascadeMode(this.cascade);\r\n\t\t});\r\n\r\n\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\titem.recalculateSelf();\r\n\t\t\tthis._addToGrid(item);\r\n\t\t});\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\t}\r\n\r\n\tpublic getItemPosition(itemId: string): NgGridItemPosition {\r\n\t\treturn this._items.has(itemId) ? this._items.get(itemId).getGridPosition() : null;\r\n\t}\r\n\r\n\tpublic getItemSize(itemId: string): NgGridItemSize {\r\n\t\treturn this._items.has(itemId) ? this._items.get(itemId).getSize() : null;\r\n\t}\r\n\r\n\tpublic ngDoCheck(): boolean {\r\n\t\tif (this._differ != null) {\r\n\t\t\tvar changes = this._differ.diff(this._config);\r\n\r\n\t\t\tif (changes != null) {\r\n\t\t\t\tthis._applyChanges(changes);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic setMargins(margins: Array<string>): void {\r\n\t\tthis.marginTop = Math.max(parseInt(margins[0]), 0);\r\n\t\tthis.marginRight = margins.length >= 2 ? Math.max(parseInt(margins[1]), 0) : this.marginTop;\r\n\t\tthis.marginBottom = margins.length >= 3 ? Math.max(parseInt(margins[2]), 0) : this.marginTop;\r\n\t\tthis.marginLeft = margins.length >= 4 ? Math.max(parseInt(margins[3]), 0) : this.marginRight;\r\n\t}\r\n\r\n\tpublic enableDrag(): void {\r\n\t\tthis.dragEnable = true;\r\n\t}\r\n\r\n\tpublic disableDrag(): void {\r\n\t\tthis.dragEnable = false;\r\n\t}\r\n\r\n\tpublic enableResize(): void {\r\n\t\tthis.resizeEnable = true;\r\n\t}\r\n\r\n\tpublic disableResize(): void {\r\n\t\tthis.resizeEnable = false;\r\n\t}\r\n\r\n\tpublic addItem(ngItem: NgGridItem): void {\r\n\t\tngItem.setCascadeMode(this.cascade);\r\n\r\n\t\tif (!this._preferNew) {\r\n\t\t\tvar newPos = this._fixGridPosition(ngItem.getGridPosition(), ngItem.getSize());\r\n\t\t\tngItem.setGridPosition(newPos);\r\n\t\t}\r\n\r\n\t\tif (ngItem.uid === null || this._items.has(ngItem.uid)) {\r\n\t\t\tngItem.uid = this.generateItemUid();\r\n\t\t}\r\n\r\n\t\tthis._items.set(ngItem.uid, ngItem);\r\n\t\tthis._addToGrid(ngItem);\r\n\r\n\t\tthis._updateSize();\r\n\r\n\t\tthis.triggerCascade().then(() => {\r\n\t\t\tngItem.recalculateSelf();\r\n\t\t\tngItem.onCascadeEvent();\r\n\r\n\t\t\tthis._emitOnItemChange();\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tpublic removeItem(ngItem: NgGridItem): void {\r\n\t\tthis._removeFromGrid(ngItem);\r\n\r\n\t\tthis._items.delete(ngItem.uid);\r\n\r\n\t\tif (this._destroyed) return;\r\n\r\n\t\tthis.triggerCascade().then(() => {\r\n\t\t\tthis._updateSize();\r\n\t\t\tthis._items.forEach((item: NgGridItem) => item.recalculateSelf());\r\n\t\t\tthis._emitOnItemChange();\r\n\t\t});\r\n\t}\r\n\r\n\tpublic updateItem(ngItem: NgGridItem): void {\r\n\t\tthis._removeFromGrid(ngItem);\r\n\t\tthis._addToGrid(ngItem);\r\n\r\n\t\tthis.triggerCascade().then(() => {\r\n\t\t\tthis._updateSize();\r\n\t\t\tngItem.onCascadeEvent();\r\n\t\t});\r\n\t}\r\n\r\n\tpublic triggerCascade(): Promise<void> {\r\n\t\tif (!this._cascadePromise) {\r\n\t\t\tthis._cascadePromise = new Promise<void>((resolve: () => void) => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis._cascadePromise = null;\r\n\t\t\t\t\tthis._cascadeGrid(null, null);\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}, 0);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this._cascadePromise;\r\n\t}\r\n\r\n\tpublic triggerResize(): void {\r\n\t\tthis.resizeEventHandler(null);\r\n\t}\r\n\r\n\tpublic resizeEventHandler(e: any): void {\r\n\t\tthis._calculateColWidth();\r\n\t\tthis._calculateRowHeight();\r\n\r\n\t\tthis._updateRatio();\r\n\r\n\t\tif (this._limitToScreen) {\r\n\t\t\tconst newMaxColumns = this._getContainerColumns();\r\n\t\t\tif (this._maxCols !== newMaxColumns) {\r\n\t\t\t\tthis._maxCols = newMaxColumns;\r\n\t\t\t\tthis._updatePositionsAfterMaxChange();\r\n\t\t\t\tthis._cascadeGrid();\r\n\t\t\t}\r\n\r\n\t\t\tif (this._centerToScreen) {\r\n\t\t\t\tthis.screenMargin = this._getScreenMargin();\r\n\r\n\t\t\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\t\t\titem.recalculateSelf();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (this._autoResize) {\r\n\t\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\t\titem.recalculateSelf();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._updateSize();\r\n\t}\r\n\r\n\tpublic mouseDownEventHandler(e: MouseEvent | TouchEvent): void {\r\n\t\tvar mousePos = this._getMousePosition(e);\r\n\t\tvar item = this._getItemFromPosition(mousePos);\r\n\r\n\t\tif (item == null) return;\r\n\r\n\t\tconst resizeDirection: string = item.canResize(e);\r\n\r\n\t\tif (this.resizeEnable && resizeDirection) {\r\n\t\t\tthis._resizeReady = true;\r\n\t\t\tthis._resizingItem = item;\r\n\t\t\tthis._resizeDirection = resizeDirection;\r\n\r\n\t\t\te.preventDefault();\r\n\t\t} else if (this.dragEnable && item.canDrag(e)) {\r\n\t\t\tthis._dragReady = true;\r\n\t\t\tthis._draggingItem = item;\r\n\r\n\t\t\tconst itemPos = item.getPosition();\r\n\t\t\tthis._posOffset = { 'left': (mousePos.left - itemPos.left), 'top': (mousePos.top - itemPos.top) }\r\n\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic mouseUpEventHandler(e: MouseEvent | TouchEvent): void {\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis._dragStop(e);\r\n\t\t} else if (this.isResizing) {\r\n\t\t\tthis._resizeStop(e);\r\n\t\t} else if (this._dragReady || this._resizeReady) {\r\n\t\t\tthis._cleanDrag();\r\n\t\t\tthis._cleanResize();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic mouseMoveEventHandler(e: MouseEvent | TouchEvent): void {\r\n\t\tif (this._resizeReady) {\r\n\t\t\tthis._resizeStart(e);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t} else if (this._dragReady) {\r\n\t\t\tthis._dragStart(e);\r\n\t\t\te.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis._drag(e);\r\n\t\t} else if (this.isResizing) {\r\n\t\t\tthis._resize(e);\r\n\t\t} else {\r\n\t\t\tvar mousePos = this._getMousePosition(e);\r\n\t\t\tvar item = this._getItemFromPosition(mousePos);\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\titem.onMouseMove(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//\tPrivate methods\r\n\tprivate _getFixDirectionFromCascade(): NgConfigFixDirection {\r\n\t\tswitch (this.cascade) {\r\n\t\t\tcase \"up\":\r\n\t\t\tcase \"down\":\r\n\t\t\t\treturn \"vertical\";\r\n\t\t\tcase \"left\":\r\n\t\t\tcase \"right\":\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"horizontal\";\r\n\t\t}\r\n\t}\r\n\tprivate _updatePositionsAfterMaxChange(): void {\r\n\t\tthis._items.forEach((item: NgGridItem) => {\r\n\t\t\tvar pos = item.getGridPosition();\r\n\t\t\tvar dims = item.getSize();\r\n\r\n\t\t\tif (!this._hasGridCollision(pos, dims) && this._isWithinBounds(pos, dims) && dims.x <= this._maxCols && dims.y <= this._maxRows) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\tif (this._maxCols > 0 && dims.x > this._maxCols) {\r\n\t\t\t\tdims.x = this._maxCols;\r\n\t\t\t\titem.setSize(dims);\r\n\t\t\t} else if (this._maxRows > 0 && dims.y > this._maxRows) {\r\n\t\t\t\tdims.y = this._maxRows;\r\n\t\t\t\titem.setSize(dims);\r\n\t\t\t}\r\n\r\n\t\t\tif (this._hasGridCollision(pos, dims) || !this._isWithinBounds(pos, dims, true)) {\r\n\t\t\t\tvar newPosition = this._fixGridPosition(pos, dims);\r\n\t\t\t\titem.setGridPosition(newPosition);\r\n\t\t\t}\r\n\r\n\t\t\tthis._addToGrid(item);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _calculateColWidth(): void {\r\n\t\tif (this._autoResize) {\r\n\t\t\tif (this._maxCols > 0 || this._visibleCols > 0) {\r\n\t\t\t\tvar maxCols = this._maxCols > 0 ? this._maxCols : this._visibleCols;\r\n\t\t\t\tvar maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\r\n\t\t\t\tvar colWidth: number = Math.floor(maxWidth / maxCols);\r\n\t\t\t\tcolWidth -= (this.marginLeft + this.marginRight);\r\n\t\t\t\tif (colWidth > 0) this.colWidth = colWidth;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.colWidth < this.minWidth || this.minCols > this._config.min_cols) {\r\n\t\t\tthis.minCols = Math.max(this._config.min_cols, Math.ceil(this.minWidth / this.colWidth));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _calculateRowHeight(): void {\r\n\t\tif (this._autoResize) {\r\n\t\t\tif (this._maxRows > 0 || this._visibleRows > 0) {\r\n\t\t\t\tvar maxRows = this._maxRows > 0 ? this._maxRows : this._visibleRows;\r\n\t\t\t\tlet maxHeight: number;\r\n\r\n\t\t\t\tif (this._elementBasedDynamicRowHeight) {\r\n\t\t\t\t\tmaxHeight = this._ngEl.nativeElement.getBoundingClientRect().height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmaxHeight = window.innerHeight - this.marginTop - this.marginBottom;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rowHeight: number = Math.max(Math.floor(maxHeight / maxRows), this.minHeight);\r\n\t\t\t\trowHeight -= (this.marginTop + this.marginBottom);\r\n\t\t\t\tif (rowHeight > 0) this.rowHeight = rowHeight;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.rowHeight < this.minHeight || this.minRows > this._config.min_rows) {\r\n\t\t\tthis.minRows = Math.max(this._config.min_rows, Math.ceil(this.minHeight / this.rowHeight));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _updateRatio(): void {\r\n\t\tif (!this._autoResize || !this._maintainRatio) return;\r\n\r\n\t\tif (this._maxCols > 0 && this._visibleRows <= 0) {\r\n\t\t\tthis.rowHeight = this.colWidth / this._aspectRatio;\r\n\t\t} else if (this._maxRows > 0 && this._visibleCols <= 0) {\r\n\t\t\tthis.colWidth = this._aspectRatio * this.rowHeight;\r\n\t\t} else if (this._maxCols == 0 && this._maxRows == 0) {\r\n\t\t\tif (this._visibleCols > 0) {\r\n\t\t\t\tthis.rowHeight = this.colWidth / this._aspectRatio;\r\n\t\t\t} else if (this._visibleRows > 0) {\r\n\t\t\t\tthis.colWidth = this._aspectRatio * this.rowHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _applyChanges(changes: any): void {\r\n\t\tchanges.forEachAddedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachChangedItem((record: any) => { this._config[record.key] = record.currentValue; });\r\n\t\tchanges.forEachRemovedItem((record: any) => { delete this._config[record.key]; });\r\n\r\n\t\tthis.setConfig(this._config);\r\n\t}\r\n\r\n\tprivate _resizeStart(e: any): void {\r\n\t\tif (!this.resizeEnable || !this._resizingItem) return;\r\n\r\n\t\t//\tSetup\r\n\t\tthis._resizingItem.startMoving();\r\n\t\tthis._removeFromGrid(this._resizingItem);\r\n\t\tthis._createPlaceholder(this._resizingItem);\r\n\r\n\t\t//\tStatus Flags\r\n\t\tthis.isResizing = true;\r\n\t\tthis._resizeReady = false;\r\n\r\n\t\t//\tEvents\r\n\t\tthis.onResizeStart.emit(this._resizingItem);\r\n\t\tthis._resizingItem.onResizeStartEvent();\r\n\t}\r\n\r\n\tprivate _dragStart(e: any): void {\r\n\t\tif (!this.dragEnable || !this._draggingItem) return;\r\n\r\n\t\t//\tStart dragging\r\n\t\tthis._draggingItem.startMoving();\r\n\t\tthis._removeFromGrid(this._draggingItem);\r\n\t\tthis._createPlaceholder(this._draggingItem);\r\n\r\n\t\t//\tStatus Flags\r\n\t\tthis.isDragging = true;\r\n\t\tthis._dragReady = false;\r\n\r\n\t\t//\tEvents\r\n\t\tthis.onDragStart.emit(this._draggingItem);\r\n\t\tthis._draggingItem.onDragStartEvent();\r\n\r\n\t\t//\tZoom\r\n\t\tif (this._zoomOnDrag) {\r\n\t\t\tthis._zoomOut();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _zoomOut(): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', 'scale(0.5, 0.5)');\r\n\t}\r\n\r\n\tprivate _resetZoom(): void {\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'transform', '');\r\n\t}\r\n\r\n\tprivate _drag(e: any): void {\r\n\t\tif (!this.isDragging) return;\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t\tif (window.getSelection().empty) {\r\n\t\t\t\twindow.getSelection().empty();\r\n\t\t\t} else if (window.getSelection().removeAllRanges) {\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t} else if ((<any>document).selection) {\r\n\t\t\t(<any>document).selection.empty();\r\n\t\t}\r\n\r\n\t\tvar mousePos = this._getMousePosition(e);\r\n\t\tvar newL = (mousePos.left - this._posOffset.left);\r\n\t\tvar newT = (mousePos.top - this._posOffset.top);\r\n\r\n\t\tvar itemPos = this._draggingItem.getGridPosition();\r\n\t\tvar gridPos = this._calculateGridPosition(newL, newT);\r\n\t\tvar dims = this._draggingItem.getSize();\r\n\r\n\t\tgridPos = this._fixPosToBoundsX(gridPos, dims);\r\n\r\n\t\tif (!this._isWithinBoundsY(gridPos, dims)) {\r\n\t\t\tgridPos = this._fixPosToBoundsY(gridPos, dims);\r\n\t\t}\r\n\r\n\t\tif (gridPos.col != itemPos.col || gridPos.row != itemPos.row) {\r\n\t\t\tthis._draggingItem.setGridPosition(gridPos, this._fixToGrid);\r\n\t\t\tthis._placeholderRef.instance.setGridPosition(gridPos);\r\n\r\n\t\t\tif (['up', 'down', 'left', 'right'].indexOf(this.cascade) >= 0) {\r\n\t\t\t\tthis._fixGridCollisions(gridPos, dims);\r\n\t\t\t\tthis._cascadeGrid(gridPos, dims);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._fixToGrid) {\r\n\t\t\tthis._draggingItem.setPosition(newL, newT);\r\n\t\t}\r\n\r\n\t\tthis.onDrag.emit(this._draggingItem);\r\n\t\tthis._draggingItem.onDragEvent();\r\n\t}\r\n\r\n\tprivate _resize(e: any): void {\r\n\t\tif (!this.isResizing) { return; }\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t\tif (window.getSelection().empty) {\r\n\t\t\t\twindow.getSelection().empty();\r\n\t\t\t} else if (window.getSelection().removeAllRanges) {\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t} else if ((<any>document).selection) {\r\n\t\t\t(<any>document).selection.empty();\r\n\t\t}\r\n\r\n\t\tconst mousePos = this._getMousePosition(e);\r\n\t\tconst itemPos = this._resizingItem.getPosition();\r\n\t\tconst itemDims = this._resizingItem.getDimensions();\r\n\t\tconst endCorner = {\r\n\t\t\tleft: itemPos.left + itemDims.width,\r\n\t\t\ttop: itemPos.top + itemDims.height,\r\n\t\t}\r\n\r\n\t\tconst resizeTop = this._resizeDirection.includes('top');\r\n\t\tconst resizeBottom = this._resizeDirection.includes('bottom');\r\n\t\tconst resizeLeft = this._resizeDirection.includes('left')\r\n\t\tconst resizeRight = this._resizeDirection.includes('right');\r\n\r\n\t\t//\tCalculate new width and height based upon resize direction\r\n\t\tlet newW = resizeRight\r\n\t\t\t? (mousePos.left - itemPos.left + 1)\r\n\t\t\t: resizeLeft\r\n\t\t\t\t? (endCorner.left - mousePos.left + 1)\r\n\t\t\t\t: itemDims.width;\r\n\t\tlet newH = resizeBottom\r\n\t\t\t? (mousePos.top - itemPos.top + 1)\r\n\t\t\t: resizeTop\r\n\t\t\t\t? (endCorner.top - mousePos.top + 1)\r\n\t\t\t\t: itemDims.height;\r\n\r\n\t\tif (newW < this.minWidth)\r\n\t\t\tnewW = this.minWidth;\r\n\t\tif (newH < this.minHeight)\r\n\t\t\tnewH = this.minHeight;\r\n\t\tif (newW < this._resizingItem.minWidth)\r\n\t\t\tnewW = this._resizingItem.minWidth;\r\n\t\tif (newH < this._resizingItem.minHeight)\r\n\t\t\tnewH = this._resizingItem.minHeight;\r\n\r\n\t\tlet newX = itemPos.left;\r\n\t\tlet newY = itemPos.top;\r\n\r\n\t\tif (resizeLeft)\r\n\t\t\tnewX = endCorner.left - newW;\r\n\t\tif (resizeTop)\r\n\t\t\tnewY = endCorner.top - newH;\r\n\r\n\t\tlet calcSize = this._calculateGridSize(newW, newH);\r\n\t\tconst itemSize = this._resizingItem.getSize();\r\n\t\tconst iGridPos = this._resizingItem.getGridPosition();\r\n\t\tconst bottomRightCorner = {\r\n\t\t\tcol: iGridPos.col + itemSize.x,\r\n\t\t\trow: iGridPos.row + itemSize.y,\r\n\t\t};\r\n\t\tconst targetPos: NgGridItemPosition = Object.assign({}, iGridPos);\r\n\r\n\t\tif (this._resizeDirection.includes(\"top\"))\r\n\t\t\ttargetPos.row = bottomRightCorner.row - calcSize.y;\r\n\t\tif (this._resizeDirection.includes(\"left\"))\r\n\t\t\ttargetPos.col = bottomRightCorner.col - calcSize.x;\r\n\r\n\t\tif (!this._isWithinBoundsX(targetPos, calcSize))\r\n\t\t\tcalcSize = this._fixSizeToBoundsX(targetPos, calcSize);\r\n\r\n\t\tif (!this._isWithinBoundsY(targetPos, calcSize))\r\n\t\t\tcalcSize = this._fixSizeToBoundsY(targetPos, calcSize);\r\n\r\n\t\tcalcSize = this._resizingItem.fixResize(calcSize);\r\n\r\n\t\tif (calcSize.x != itemSize.x || calcSize.y != itemSize.y) {\r\n\t\t\tthis._resizingItem.setGridPosition(targetPos, this._fixToGrid);\r\n\t\t\tthis._placeholderRef.instance.setGridPosition(targetPos);\r\n\t\t\tthis._resizingItem.setSize(calcSize, this._fixToGrid);\r\n\t\t\tthis._placeholderRef.instance.setSize(calcSize);\r\n\r\n\t\t\tif (['up', 'down', 'left', 'right'].indexOf(this.cascade) >= 0) {\r\n\t\t\t\tthis._fixGridCollisions(targetPos, calcSize);\r\n\t\t\t\tthis._cascadeGrid(targetPos, calcSize);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this._fixToGrid) {\r\n\t\t\tthis._resizingItem.setDimensions(newW, newH);\r\n\t\t\tthis._resizingItem.setPosition(newX, newY);\r\n\t\t}\r\n\r\n\t\tthis.onResize.emit(this._resizingItem);\r\n\t\tthis._resizingItem.onResizeEvent();\r\n\t}\r\n\r\n\tprivate _dragStop(e: any): void {\r\n\t\tif (!this.isDragging) return;\r\n\r\n\t\tthis.isDragging = false;\r\n\r\n\t\tvar itemPos = this._draggingItem.getGridPosition();\r\n\r\n\t\tthis._draggingItem.setGridPosition(itemPos);\r\n\t\tthis._addToGrid(this._draggingItem);\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\r\n\t\tthis._draggingItem.stopMoving();\r\n\t\tthis._draggingItem.onDragStopEvent();\r\n\t\tthis.onDragStop.emit(this._draggingItem);\r\n\r\n\t\tthis._cleanDrag();\r\n\t\tthis._placeholderRef.destroy();\r\n\r\n\t\tthis._emitOnItemChange();\r\n\r\n\t\tif (this._zoomOnDrag) {\r\n\t\t\tthis._resetZoom();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _resizeStop(e: any): void {\r\n\t\tif (!this.isResizing) return;\r\n\r\n\t\tthis.isResizing = false;\r\n\r\n\t\tconst itemDims = this._resizingItem.getSize();\r\n\t\tthis._resizingItem.setSize(itemDims);\r\n\r\n\t\tconst itemPos = this._resizingItem.getGridPosition();\r\n\t\tthis._resizingItem.setGridPosition(itemPos);\r\n\r\n\t\tthis._addToGrid(this._resizingItem);\r\n\r\n\t\tthis._cascadeGrid();\r\n\t\tthis._updateSize();\r\n\r\n\t\tthis._resizingItem.stopMoving();\r\n\t\tthis._resizingItem.onResizeStopEvent();\r\n\t\tthis.onResizeStop.emit(this._resizingItem);\r\n\r\n\t\tthis._cleanResize();\r\n\t\tthis._placeholderRef.destroy();\r\n\r\n\t\tthis._emitOnItemChange();\r\n\t}\r\n\r\n\tprivate _cleanDrag(): void {\r\n\t\tthis._draggingItem = null;\r\n\t\tthis._posOffset = null;\r\n\t\tthis.isDragging = false;\r\n\t\tthis._dragReady = false;\r\n\t}\r\n\r\n\tprivate _cleanResize(): void {\r\n\t\tthis._resizingItem = null;\r\n\t\tthis._resizeDirection = null;\r\n\t\tthis.isResizing = false;\r\n\t\tthis._resizeReady = false;\r\n\t}\r\n\r\n\tprivate _calculateGridSize(width: number, height: number): NgGridItemSize {\r\n\t\twidth += this.marginLeft + this.marginRight;\r\n\t\theight += this.marginTop + this.marginBottom;\r\n\r\n\t\tvar sizex = Math.max(this.minCols, Math.round(width / (this.colWidth + this.marginLeft + this.marginRight)));\r\n\t\tvar sizey = Math.max(this.minRows, Math.round(height / (this.rowHeight + this.marginTop + this.marginBottom)));\r\n\r\n\t\tif (!this._isWithinBoundsX({ col: 1, row: 1 }, { x: sizex, y: sizey })) sizex = this._maxCols;\r\n\t\tif (!this._isWithinBoundsY({ col: 1, row: 1 }, { x: sizex, y: sizey })) sizey = this._maxRows;\r\n\r\n\t\treturn { 'x': sizex, 'y': sizey };\r\n\t}\r\n\r\n\tprivate _calculateGridPosition(left: number, top: number): NgGridItemPosition {\r\n\t\tvar col = Math.max(1, Math.round(left / (this.colWidth + this.marginLeft + this.marginRight)) + 1);\r\n\t\tvar row = Math.max(1, Math.round(top / (this.rowHeight + this.marginTop + this.marginBottom)) + 1);\r\n\r\n\t\tif (!this._isWithinBoundsX({ col: col, row: row }, { x: 1, y: 1 })) col = this._maxCols;\r\n\t\tif (!this._isWithinBoundsY({ col: col, row: row }, { x: 1, y: 1 })) row = this._maxRows;\r\n\r\n\t\treturn { 'col': col, 'row': row };\r\n\t}\r\n\r\n\tprivate _hasGridCollision(pos: NgGridItemPosition, dims: NgGridItemSize): boolean {\r\n\t\tvar positions = this._getCollisions(pos, dims);\r\n\r\n\t\tif (positions == null || positions.length == 0) return false;\r\n\r\n\t\treturn positions.some((v: NgGridItem) => {\r\n\t\t\treturn !(v === null);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _getCollisions(pos: NgGridItemPosition, dims: NgGridItemSize): Array<NgGridItem> {\r\n\t\tconst returns: Array<NgGridItem> = [];\r\n\r\n\t\tif (!pos.col) { pos.col = 1; }\r\n\t\tif (!pos.row) { pos.row = 1; }\r\n\r\n\t\tconst leftCol = pos.col;\r\n\t\tconst rightCol = pos.col + dims.x;\r\n\t\tconst topRow = pos.row;\r\n\t\tconst bottomRow = pos.row + dims.y;\r\n\r\n\t\tthis._itemsInGrid.forEach((itemId: string) => {\r\n\t\t\tconst item: NgGridItem = this._items.get(itemId);\r\n\r\n\t\t\tif (!item) {\r\n\t\t\t\tthis._itemsInGrid.delete(itemId);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst itemLeftCol = item.col;\r\n\t\t\tconst itemRightCol = item.col + item.sizex;\r\n\t\t\tconst itemTopRow = item.row;\r\n\t\t\tconst itemBottomRow = item.row + item.sizey;\r\n\r\n\t\t\tconst withinColumns = leftCol < itemRightCol && itemLeftCol < rightCol;\r\n\t\t\tconst withinRows = topRow < itemBottomRow && itemTopRow < bottomRow;\r\n\r\n\t\t\tif (withinColumns && withinRows) {\r\n\t\t\t\treturns.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn returns;\r\n\t}\r\n\r\n\tprivate _fixGridCollisions(pos: NgGridItemPosition, dims: NgGridItemSize): void {\r\n\t\tconst collisions: Array<NgGridItem> = this._getCollisions(pos, dims);\r\n\t\tif (collisions.length === 0) { return; }\r\n\r\n\t\tfor (let collision of collisions) {\r\n\t\t\tthis._removeFromGrid(collision);\r\n\r\n\t\t\tconst itemDims: NgGridItemSize = collision.getSize();\r\n\t\t\tconst itemPos: NgGridItemPosition = collision.getGridPosition();\r\n\t\t\tlet newItemPos: NgGridItemPosition = { col: itemPos.col, row: itemPos.row };\r\n\r\n\t\t\tif (this._collisionFixDirection === \"vertical\") {\r\n\t\t\t\tnewItemPos.row = pos.row + dims.y;\r\n\r\n\t\t\t\tif (!this._isWithinBoundsY(newItemPos, itemDims)) {\r\n\t\t\t\t\tnewItemPos.col = pos.col + dims.x;\r\n\t\t\t\t\tnewItemPos.row = 1;\r\n\t\t\t\t}\r\n\t\t\t} else if (this._collisionFixDirection === \"horizontal\") {\r\n\t\t\t\tnewItemPos.col = pos.col + dims.x;\r\n\r\n\t\t\t\tif (!this._isWithinBoundsX(newItemPos, itemDims)) {\r\n\t\t\t\t\tnewItemPos.col = 1;\r\n\t\t\t\t\tnewItemPos.row = pos.row + dims.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcollision.setGridPosition(newItemPos);\r\n\r\n\t\t\tthis._fixGridCollisions(newItemPos, itemDims);\r\n\t\t\tthis._addToGrid(collision);\r\n\t\t\tcollision.onCascadeEvent();\r\n\t\t}\r\n\r\n\t\tthis._fixGridCollisions(pos, dims);\r\n\t}\r\n\r\n\tprivate _cascadeGrid(pos?: NgGridItemPosition, dims?: NgGridItemSize): void {\r\n\t\tif (this._destroyed) return;\r\n\t\tif (!pos !== !dims) throw new Error('Cannot cascade with only position and not dimensions');\r\n\r\n\t\tif (this.isDragging && this._draggingItem && !pos && !dims) {\r\n\t\t\tpos = this._draggingItem.getGridPosition();\r\n\t\t\tdims = this._draggingItem.getSize();\r\n\t\t} else if (this.isResizing && this._resizingItem && !pos && !dims) {\r\n\t\t\tpos = this._resizingItem.getGridPosition();\r\n\t\t\tdims = this._resizingItem.getSize();\r\n\t\t}\r\n\r\n\t\tlet itemsInGrid: NgGridItem[] = Array.from(this._itemsInGrid, (itemId: string) => this._items.get(itemId));\r\n\r\n\t\tswitch (this.cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'down':\r\n\t\t\t\titemsInGrid = itemsInGrid.sort(NgGridHelper.sortItemsByPositionVertical);\r\n\t\t\t\tconst lowestRowPerColumn: Map<number, number> = new Map<number, number>();\r\n\r\n\t\t\t\tfor (let item of itemsInGrid) {\r\n\t\t\t\t\tif (item.isFixed) continue;\r\n\r\n\t\t\t\t\tconst itemDims: NgGridItemSize = item.getSize();\r\n\t\t\t\t\tconst itemPos: NgGridItemPosition = item.getGridPosition();\r\n\r\n\t\t\t\t\tlet lowestRowForItem: number = lowestRowPerColumn.get(itemPos.col) || 1;\r\n\r\n\t\t\t\t\tfor (let i: number = 1; i < itemDims.x; i++) {\r\n\t\t\t\t\t\tconst lowestRowForColumn = lowestRowPerColumn.get(itemPos.col + i) || 1;\r\n\t\t\t\t\t\tlowestRowForItem = Math.max(lowestRowForColumn, lowestRowForItem);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst leftCol = itemPos.col;\r\n\t\t\t\t\tconst rightCol = itemPos.col + itemDims.x;\r\n\r\n\t\t\t\t\tif (pos && dims) {\r\n\t\t\t\t\t\tconst withinColumns = rightCol > pos.col && leftCol < (pos.col + dims.x);\r\n\r\n\t\t\t\t\t\tif (withinColumns) {          //\tIf our element is in one of the item's columns\r\n\t\t\t\t\t\t\tconst roomAboveItem = itemDims.y <= (pos.row - lowestRowForItem);\r\n\r\n\t\t\t\t\t\t\tif (!roomAboveItem) {                                                  //\tItem can't fit above our element\r\n\t\t\t\t\t\t\t\tlowestRowForItem = Math.max(lowestRowForItem, pos.row + dims.y);   //\tSet the lowest row to be below it\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst newPos: NgGridItemPosition = { col: itemPos.col, row: lowestRowForItem };\r\n\r\n\t\t\t\t\t//\tWhat if it's not within bounds Y?\r\n\t\t\t\t\tif (lowestRowForItem != itemPos.row && this._isWithinBoundsY(newPos, itemDims)) {\t//\tIf the item is not already on this row move it up\r\n\t\t\t\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\t\t\t\titem.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\titem.onCascadeEvent();\r\n\t\t\t\t\t\tthis._addToGrid(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i: number = 0; i < itemDims.x; i++) {\r\n\t\t\t\t\t\tlowestRowPerColumn.set(itemPos.col + i, lowestRowForItem + itemDims.y);\t//\tUpdate the lowest row to be below the item\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\tcase 'right':\r\n\t\t\t\titemsInGrid = itemsInGrid.sort(NgGridHelper.sortItemsByPositionHorizontal);\r\n\t\t\t\tconst lowestColumnPerRow: Map<number, number> = new Map<number, number>();\r\n\r\n\t\t\t\tfor (let item of itemsInGrid) {\r\n\t\t\t\t\tconst itemDims: NgGridItemSize = item.getSize();\r\n\t\t\t\t\tconst itemPos: NgGridItemPosition = item.getGridPosition();\r\n\r\n\t\t\t\t\tlet lowestColumnForItem: number = lowestColumnPerRow.get(itemPos.row) || 1;\r\n\r\n\t\t\t\t\tfor (let i: number = 1; i < itemDims.y; i++) {\r\n\t\t\t\t\t\tlet lowestOffsetColumn: number = lowestColumnPerRow.get(itemPos.row + i) || 1;\r\n\t\t\t\t\t\tlowestColumnForItem = Math.max(lowestOffsetColumn, lowestColumnForItem);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst topRow = itemPos.row;\r\n\t\t\t\t\tconst bottomRow = itemPos.row + itemDims.y;\r\n\r\n\t\t\t\t\tif (pos && dims) {\r\n\t\t\t\t\t\tconst withinRows = bottomRow > pos.col && topRow < (pos.col + dims.x);\r\n\r\n\t\t\t\t\t\tif (withinRows) {          //\tIf our element is in one of the item's rows\r\n\t\t\t\t\t\t\tconst roomNextToItem = itemDims.x <= (pos.col - lowestColumnForItem);\r\n\r\n\t\t\t\t\t\t\tif (!roomNextToItem) {                                                      //\tItem can't fit next to our element\r\n\t\t\t\t\t\t\t\tlowestColumnForItem = Math.max(lowestColumnForItem, pos.col + dims.x);  //\tSet the lowest col to be the other side of it\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst newPos: NgGridItemPosition = { col: lowestColumnForItem, row: itemPos.row };\r\n\r\n\t\t\t\t\tif (lowestColumnForItem != itemPos.col && this._isWithinBoundsX(newPos, itemDims)) {\t//\tIf the item is not already on this col move it up\r\n\t\t\t\t\t\tthis._removeFromGrid(item);\r\n\r\n\t\t\t\t\t\titem.setGridPosition(newPos);\r\n\r\n\t\t\t\t\t\titem.onCascadeEvent();\r\n\t\t\t\t\t\tthis._addToGrid(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i: number = 0; i < itemDims.y; i++) {\r\n\t\t\t\t\t\tlowestColumnPerRow.set(itemPos.row + i, lowestColumnForItem + itemDims.x);\t//\tUpdate the lowest col to be below the item\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _fixGridPosition(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\tif (!this._hasGridCollision(pos, dims)) return pos;\r\n\r\n\t\tconst maxRow = this._maxRows === 0 ? this._getMaxRow() : this._maxRows;\r\n\t\tconst maxCol = this._maxCols === 0 ? this._getMaxCol() : this._maxCols;\r\n\t\tconst newPos = {\r\n\t\t\tcol: pos.col,\r\n\t\t\trow: pos.row,\r\n\t\t};\r\n\r\n\t\tif (this._itemFixDirection === \"vertical\") {\r\n\t\t\tfixLoop:\r\n\t\t\tfor (; newPos.col <= maxRow;) {\r\n\t\t\t\tconst itemsInPath = this._getItemsInVerticalPath(newPos, dims, newPos.row);\r\n\t\t\t\tlet nextRow = newPos.row;\r\n\r\n\t\t\t\tfor (let item of itemsInPath) {\r\n\t\t\t\t\tif (item.row - nextRow >= dims.y) {\r\n\t\t\t\t\t\tnewPos.row = nextRow;\r\n\t\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnextRow = item.row + item.sizey;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (maxRow - nextRow >= dims.y) {\r\n\t\t\t\t\tnewPos.row = nextRow;\r\n\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnewPos.col = Math.max(newPos.col + 1, Math.min.apply(Math, itemsInPath.map((item) => item.col + dims.x)));\r\n\t\t\t\tnewPos.row = 1;\r\n\t\t\t}\r\n\t\t} else if (this._itemFixDirection === \"horizontal\") {\r\n\t\t\tfixLoop:\r\n\t\t\tfor (; newPos.row <= maxRow;) {\r\n\t\t\t\tconst itemsInPath = this._getItemsInHorizontalPath(newPos, dims, newPos.col);\r\n\t\t\t\tlet nextCol = newPos.col;\r\n\r\n\t\t\t\tfor (let item of itemsInPath) {\r\n\t\t\t\t\tif (item.col - nextCol >= dims.x) {\r\n\t\t\t\t\t\tnewPos.col = nextCol;\r\n\t\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnextCol = item.col + item.sizex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (maxCol - nextCol >= dims.x) {\r\n\t\t\t\t\tnewPos.col = nextCol;\r\n\t\t\t\t\tbreak fixLoop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnewPos.row = Math.max(newPos.row + 1, Math.min.apply(Math, itemsInPath.map((item) => item.row + dims.y)));\r\n\t\t\t\tnewPos.col = 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newPos;\r\n\t}\r\n\r\n\tprivate _getItemsInHorizontalPath(pos: NgGridItemPosition, dims: NgGridItemSize, startColumn: number = 0): NgGridItem[] {\r\n\t\tconst itemsInPath: NgGridItem[] = [];\r\n\t\tconst topRow: number = pos.row + dims.y - 1;\r\n\r\n\t\tthis._itemsInGrid.forEach((itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (item.col + item.sizex - 1 < startColumn) { return; }    //\tItem falls after start column\r\n\t\t\tif (item.row > topRow) { return; }                          //\tItem falls above path\r\n\t\t\tif (item.row + item.sizey - 1 < pos.row) { return; }        //\tItem falls below path\r\n\t\t\titemsInPath.push(item);\r\n\t\t});\r\n\r\n\t\treturn itemsInPath;\r\n\t}\r\n\r\n\tprivate _getItemsInVerticalPath(pos: NgGridItemPosition, dims: NgGridItemSize, startRow: number = 0): NgGridItem[] {\r\n\t\tconst itemsInPath: NgGridItem[] = [];\r\n\t\tconst rightCol: number = pos.col + dims.x - 1;\r\n\r\n\t\tthis._itemsInGrid.forEach((itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (item.row + item.sizey - 1 < startRow) { return; }   //\tItem falls above start row\r\n\t\t\tif (item.col > rightCol) { return; }                    //\tItem falls after path\r\n\t\t\tif (item.col + item.sizex - 1 < pos.col) { return; }    //\tItem falls before path\r\n\t\t\titemsInPath.push(item);\r\n\t\t});\r\n\r\n\t\treturn itemsInPath;\r\n\t}\r\n\r\n\tprivate _isWithinBoundsX(pos: NgGridItemPosition, dims: NgGridItemSize, allowExcessiveItems: boolean = false) {\r\n\t\treturn this._maxCols == 0 || (allowExcessiveItems && pos.col == 1) || (pos.col + dims.x - 1) <= this._maxCols;\r\n\t}\r\n\r\n\tprivate _fixPosToBoundsX(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\tif (!this._isWithinBoundsX(pos, dims)) {\r\n\t\t\tpos.col = Math.max(this._maxCols - (dims.x - 1), 1);\r\n\t\t\tpos.row ++;\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tprivate _fixSizeToBoundsX(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemSize {\r\n\t\tif (!this._isWithinBoundsX(pos, dims)) {\r\n\t\t\tdims.x = Math.max(this._maxCols - (pos.col - 1), 1);\r\n\t\t\tdims.y++;\r\n\t\t}\r\n\t\treturn dims;\r\n\t}\r\n\r\n\tprivate _isWithinBoundsY(pos: NgGridItemPosition, dims: NgGridItemSize, allowExcessiveItems: boolean = false) {\r\n\t\treturn this._maxRows == 0 || (allowExcessiveItems && pos.row == 1) || (pos.row + dims.y - 1) <= this._maxRows;\r\n\t}\r\n\r\n\tprivate _fixPosToBoundsY(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\tif (!this._isWithinBoundsY(pos, dims)) {\r\n\t\t\tpos.row = Math.max(this._maxRows - (dims.y - 1), 1);\r\n\t\t\tpos.col++;\r\n\t\t}\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tprivate _fixSizeToBoundsY(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemSize {\r\n\t\tif (!this._isWithinBoundsY(pos, dims)) {\r\n\t\t\tdims.y = Math.max(this._maxRows - (pos.row - 1), 1);\r\n\t\t\tdims.x++;\r\n\t\t}\r\n\t\treturn dims;\r\n\t}\r\n\r\n\tprivate _isWithinBounds(pos: NgGridItemPosition, dims: NgGridItemSize, allowExcessiveItems: boolean = false) {\r\n\t\treturn this._isWithinBoundsX(pos, dims, allowExcessiveItems) && this._isWithinBoundsY(pos, dims, allowExcessiveItems);\r\n\t}\r\n\r\n\tprivate _fixPosToBounds(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemPosition {\r\n\t\treturn this._fixPosToBoundsX(this._fixPosToBoundsY(pos, dims), dims);\r\n\t}\r\n\r\n\tprivate _fixSizeToBounds(pos: NgGridItemPosition, dims: NgGridItemSize): NgGridItemSize {\r\n\t\treturn this._fixSizeToBoundsX(pos, this._fixSizeToBoundsY(pos, dims));\r\n\t}\r\n\r\n\tprivate _addToGrid(item: NgGridItem): void {\r\n\t\tlet pos: NgGridItemPosition = item.getGridPosition();\r\n\t\tconst dims: NgGridItemSize = item.getSize();\r\n\r\n\t\tif (this._hasGridCollision(pos, dims)) {\r\n\t\t\tthis._fixGridCollisions(pos, dims);\r\n\t\t\tpos = item.getGridPosition();\r\n\t\t}\r\n\r\n\t\tthis._itemsInGrid.add(item.uid);\r\n\t}\r\n\r\n\tprivate _removeFromGrid(item: NgGridItem): void {\r\n\t\tthis._itemsInGrid.delete(item.uid);\r\n\t}\r\n\r\n\tprivate _updateSize(): void {\r\n\t\tif (this._destroyed) return;\r\n\t\tlet maxCol: number = this._getMaxCol();\r\n\t\tlet maxRow: number = this._getMaxRow();\r\n\r\n\t\tif (maxCol != this._curMaxCol || maxRow != this._curMaxRow) {\r\n\t\t\tthis._curMaxCol = maxCol;\r\n\t\t\tthis._curMaxRow = maxRow;\r\n\t\t}\r\n\r\n\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'width', '100%');//(maxCol * (this.colWidth + this.marginLeft + this.marginRight))+'px');\r\n\t\tif (!this._elementBasedDynamicRowHeight) {\r\n\t\t\tthis._renderer.setElementStyle(this._ngEl.nativeElement, 'height', (maxRow * (this.rowHeight + this.marginTop + this.marginBottom)) + 'px');\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _getMaxRow(): number {\r\n\t\tconst itemsRows: number[] = Array.from(this._itemsInGrid, (itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (!item) return 0;\r\n\t\t\treturn item.row + item.sizey - 1;\r\n\t\t});\r\n\r\n\t\treturn Math.max.apply(null, itemsRows);\r\n\t}\r\n\r\n\tprivate _getMaxCol(): number {\r\n\t\tconst itemsCols: number[] = Array.from(this._itemsInGrid, (itemId: string) => {\r\n\t\t\tconst item = this._items.get(itemId);\r\n\t\t\tif (!item) return 0;\r\n\t\t\treturn item.col + item.sizex - 1;\r\n\t\t});\r\n\r\n\t\treturn Math.max.apply(null, itemsCols);\r\n\t}\r\n\r\n\tprivate _getMousePosition(e: any): NgGridRawPosition {\r\n\t\tif (((<any>window).TouchEvent && e instanceof TouchEvent) || (e.touches || e.changedTouches)) {\r\n\t\t\te = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n\t\t}\r\n\r\n\t\tconst refPos: any = this._ngEl.nativeElement.getBoundingClientRect();\r\n\r\n\t\tlet left: number = e.clientX - refPos.left;\r\n\t\tlet top: number = e.clientY - refPos.top;\r\n\r\n\t\tif (this.cascade == 'down') top = refPos.top + refPos.height - e.clientY;\r\n\t\tif (this.cascade == 'right') left = refPos.left + refPos.width - e.clientX;\r\n\r\n\t\tif (this.isDragging && this._zoomOnDrag) {\r\n\t\t\tleft *= 2;\r\n\t\t\ttop *= 2;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _getAbsoluteMousePosition(e: any): NgGridRawPosition {\r\n\t\tif (((<any>window).TouchEvent && e instanceof TouchEvent) || (e.touches || e.changedTouches)) {\r\n\t\t\te = e.touches.length > 0 ? e.touches[0] : e.changedTouches[0];\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tleft: e.clientX,\r\n\t\t\ttop: e.clientY\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _getContainerColumns(): number {\r\n\t\tconst maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\t\tconst itemWidth: number = this.colWidth + this.marginLeft + this.marginRight;\r\n\t\treturn Math.floor(maxWidth / itemWidth);\r\n\t}\r\n\r\n\tprivate _getContainerRows(): number {\r\n\t\tconst maxHeight: number = window.innerHeight - this.marginTop - this.marginBottom;\r\n\t\treturn Math.floor(maxHeight / (this.rowHeight + this.marginTop + this.marginBottom));\r\n\t}\r\n\r\n\tprivate _getScreenMargin(): number {\r\n\t\tconst maxWidth: number = this._ngEl.nativeElement.getBoundingClientRect().width;\r\n\t\tconst itemWidth: number = this.colWidth + this.marginLeft + this.marginRight;\r\n\t\treturn Math.floor((maxWidth - (this._maxCols * itemWidth)) / 2);;\r\n\t}\r\n\r\n\tprivate _getItemFromPosition(position: NgGridRawPosition): NgGridItem {\r\n\t\treturn Array.from(this._itemsInGrid, (itemId: string) => this._items.get(itemId)).find((item: NgGridItem) => {\r\n\t\t\tif (!item) return false;\r\n\r\n\t\t\tconst size: NgGridItemDimensions = item.getDimensions();\r\n\t\t\tconst pos: NgGridRawPosition = item.getPosition();\r\n\r\n\t\t\treturn position.left >= pos.left && position.left < (pos.left + size.width) &&\r\n\t\t\tposition.top >= pos.top && position.top < (pos.top + size.height);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _createPlaceholder(item: NgGridItem): void {\r\n\t\tconst pos: NgGridItemPosition = item.getGridPosition();\r\n\t\tconst dims: NgGridItemSize = item.getSize();\r\n\r\n\t\tconst factory = this.componentFactoryResolver.resolveComponentFactory(NgGridPlaceholder);\r\n\t\tvar componentRef: ComponentRef<NgGridPlaceholder> = item.containerRef.createComponent(factory);\r\n\t\tthis._placeholderRef = componentRef;\r\n\t\tconst placeholder: NgGridPlaceholder = componentRef.instance;\r\n\t\tplaceholder.registerGrid(this);\r\n\t\tplaceholder.setCascadeMode(this.cascade);\r\n\t\tplaceholder.setGridPosition({ col: pos.col, row: pos.row });\r\n\t\tplaceholder.setSize({ x: dims.x, y: dims.y });\r\n\t}\r\n\r\n\tprivate _emitOnItemChange() {\r\n\t\tconst itemOutput: any[] = Array.from(this._itemsInGrid)\r\n\t\t\t.map((itemId: string) => this._items.get(itemId))\r\n\t\t\t.filter((item: NgGridItem) => !!item)\r\n\t\t\t.map((item: NgGridItem) => item.getEventOutput());\r\n\r\n\t\tthis.onItemChange.emit(itemOutput);\r\n\t}\r\n\r\n\tprivate _defineListeners(): void {\r\n\t\tconst element = this._ngEl.nativeElement;\r\n\r\n\t\tthis._documentMousemove$ = fromEvent<MouseEvent>(document, 'mousemove');\r\n\t\tthis._documentMouseup$ = fromEvent<MouseEvent>(document, 'mouseup');\r\n\t\tthis._mousedown$ = fromEvent(element, 'mousedown');\r\n\t\tthis._mousemove$ = fromEvent(element, 'mousemove');\r\n\t\tthis._mouseup$ = fromEvent(element, 'mouseup');\r\n\t\tthis._touchstart$ = fromEvent(element, 'touchstart');\r\n\t\tthis._touchmove$ = fromEvent(element, 'touchmove');\r\n\t\tthis._touchend$ = fromEvent(element, 'touchend');\r\n\t}\r\n\r\n\tprivate _enableListeners(): void {\r\n\t\tif (this._enabledListener) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._enableMouseListeners();\r\n\r\n\t\tif (this._isTouchDevice()) {\r\n\t\t\tthis._enableTouchListeners();\r\n\t\t}\r\n\r\n\t\tthis._enabledListener = true;\r\n\t}\r\n\r\n\tprivate _disableListeners(): void {\r\n\t\tthis._subscriptions.forEach((subs: Subscription) => subs.unsubscribe());\r\n\t\tthis._enabledListener = false;\r\n\t}\r\n\r\n\tprivate _isTouchDevice(): boolean {\r\n\t\treturn 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n\t};\r\n\r\n\tprivate _enableTouchListeners(): void {\r\n\t\tconst touchstartSubs = this._touchstart$.subscribe((e: TouchEvent) => this.mouseDownEventHandler(e));\r\n\t\tconst touchmoveSubs = this._touchmove$.subscribe((e: TouchEvent) => this.mouseMoveEventHandler(e));\r\n\t\tconst touchendSubs = this._touchend$.subscribe((e: TouchEvent) => this.mouseUpEventHandler(e));\r\n\r\n\t\tthis._subscriptions.push(\r\n\t\t\ttouchstartSubs,\r\n\t\t\ttouchmoveSubs,\r\n\t\t\ttouchendSubs\r\n\t\t);\r\n\t}\r\n\r\n\tprivate _enableMouseListeners(): void {\r\n\t\tconst documentMousemoveSubs = this._documentMousemove$.subscribe((e: MouseEvent) => this.mouseMoveEventHandler(e));\r\n\t\tconst documentMouseupSubs = this._documentMouseup$.subscribe((e: MouseEvent) => this.mouseUpEventHandler(e));\r\n\t\tconst mousedownSubs = this._mousedown$.subscribe((e: MouseEvent) => this.mouseDownEventHandler(e));\r\n\t\tconst mousemoveSubs = this._mousemove$.subscribe((e: MouseEvent) => this.mouseMoveEventHandler(e));\r\n\t\tconst mouseupSubs = this._mouseup$.subscribe((e: MouseEvent) => this.mouseUpEventHandler(e));\r\n\r\n\t\tthis._subscriptions.push(\r\n\t\t\tdocumentMousemoveSubs,\r\n\t\t\tdocumentMouseupSubs,\r\n\t\t\tmousedownSubs,\r\n\t\t\tmousemoveSubs,\r\n\t\t\tmouseupSubs\r\n\t\t);\r\n\t}\r\n}\r\n","import { NgGrid } from './NgGrid';\r\nimport { NgGridItemConfig, NgGridItemEvent, NgGridItemPosition, NgGridItemSize, NgGridRawPosition, NgGridItemDimensions, ResizeHandle } from '../interfaces/INgGrid';\r\nimport { Directive, ElementRef, Renderer2, EventEmitter, KeyValueDiffer, KeyValueDiffers, OnInit, OnDestroy, ViewContainerRef, Output, DoCheck } from '@angular/core';\r\n\r\n@Directive({\r\n\tselector: '[ngGridItem]',\r\n\tinputs: ['config: ngGridItem']\r\n})\r\nexport class NgGridItem implements OnInit, OnDestroy, DoCheck {\r\n\t//\tEvent Emitters\r\n\t@Output() public onItemChange: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>(false);\r\n\t@Output() public onDragStart: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onDrag: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onDragStop: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onDragAny: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResizeStart: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResize: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResizeStop: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onResizeAny: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChangeStart: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChange: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChangeStop: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public onChangeAny: EventEmitter<NgGridItemEvent> = new EventEmitter<NgGridItemEvent>();\r\n\t@Output() public ngGridItemChange: EventEmitter<NgGridItemConfig> = new EventEmitter<NgGridItemConfig>();\r\n\r\n\t//\tDefault config\r\n\tprivate static CONST_DEFAULT_CONFIG: NgGridItemConfig = {\r\n\t\tuid: null,\r\n\t\tcol: 1,\r\n\t\trow: 1,\r\n\t\tsizex: 1,\r\n\t\tsizey: 1,\r\n\t\tdragHandle: null,\r\n\t\tresizeHandle: null,\r\n\t\tfixed: false,\r\n\t\tdraggable: true,\r\n\t\tresizable: true,\r\n\t\tborderSize: 25\r\n\t};\r\n\r\n\tpublic isFixed: boolean = false;\r\n\tpublic isDraggable: boolean = true;\r\n\tpublic isResizable: boolean = true;\r\n\tpublic minWidth: number = 0;\r\n\tpublic minHeight: number = 0;\r\n\tpublic uid: string = null;\r\n\r\n\t//\tPrivate variables\r\n\tprivate _payload: any;\r\n\tprivate _currentPosition: NgGridItemPosition = { col: 1, row: 1 };\r\n\tprivate _size: NgGridItemSize = { x: 1, y: 1 };\r\n\tprivate _config = NgGridItem.CONST_DEFAULT_CONFIG;\r\n\tprivate _userConfig = null;\r\n\tprivate _dragHandle: string;\r\n\tprivate _resizeHandle: ResizeHandle;\r\n\tprivate _borderSize: number;\r\n\tprivate _elemWidth: number;\r\n\tprivate _elemHeight: number;\r\n\tprivate _elemLeft: number;\r\n\tprivate _elemTop: number;\r\n\tprivate _added: boolean = false;\r\n\tprivate _differ: KeyValueDiffer<string, any>;\r\n\tprivate _cascadeMode: string;\r\n\tprivate _maxCols: number = 0;\r\n\tprivate _minCols: number = 0;\r\n\tprivate _maxRows: number = 0;\r\n\tprivate _minRows: number = 0;\r\n\r\n\t//\t[ng-grid-item] handler\r\n\tset config(v: NgGridItemConfig) {\r\n\t\tthis._userConfig = v;\r\n\r\n\t\tconst configObject = Object.assign({}, NgGridItem.CONST_DEFAULT_CONFIG, v);\r\n\t\tfor (let x in NgGridItem.CONST_DEFAULT_CONFIG)\r\n\t\t\tif (configObject[x] == null)\r\n\t\t\t\tconfigObject[x] = NgGridItem.CONST_DEFAULT_CONFIG[x];\r\n\r\n\t\tthis.setConfig(configObject);\r\n\r\n\t\tif (this._userConfig != null) {\r\n\t\t\tif (this._differ == null) {\r\n\t\t\t\tthis._differ = this._differs.find(this._userConfig).create();\r\n\t\t\t}\r\n\r\n\t\t\tthis._differ.diff(this._userConfig);\r\n\t\t}\r\n\r\n\t\tif (!this._added) {\r\n\t\t\tthis._added = true;\r\n\t\t\tthis._ngGrid.addItem(this);\r\n\t\t}\r\n\r\n\t\tthis._recalculateDimensions();\r\n\t\tthis._recalculatePosition();\r\n\t}\r\n\r\n\tget sizex(): number {\r\n\t\treturn this._size.x;\r\n\t}\r\n\r\n\tget sizey(): number {\r\n\t\treturn this._size.y;\r\n\t}\r\n\r\n\tget col(): number {\r\n\t\treturn this._currentPosition.col;\r\n\t}\r\n\r\n\tget row(): number {\r\n\t\treturn this._currentPosition.row;\r\n\t}\r\n\r\n\tget currentCol(): number {\r\n\t\treturn this._currentPosition.col;\r\n\t}\r\n\r\n\tget currentRow(): number {\r\n\t\treturn this._currentPosition.row;\r\n\t}\r\n\r\n\t//\tConstructor\r\n\tconstructor(\r\n\t\tprivate _differs: KeyValueDiffers,\r\n\t\tprivate _ngEl: ElementRef,\r\n\t\tprivate _renderer: Renderer2,\r\n\t\tprivate _ngGrid: NgGrid,\r\n\t\tpublic containerRef: ViewContainerRef,\r\n\t) { }\r\n\r\n\tpublic onResizeStartEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onResizeStart.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChangeStart.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onResizeEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onResize.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChange.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onResizeStopEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onResizeStop.emit(event);\r\n\t\tthis.onResizeAny.emit(event);\r\n\t\tthis.onChangeStop.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\r\n\t\tthis.onConfigChangeEvent();\r\n\t}\r\n\tpublic onDragStartEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onDragStart.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChangeStart.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onDragEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onDrag.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChange.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\t}\r\n\tpublic onDragStopEvent(): void {\r\n\t\tconst event: NgGridItemEvent = this.getEventOutput();\r\n\t\tthis.onDragStop.emit(event);\r\n\t\tthis.onDragAny.emit(event);\r\n\t\tthis.onChangeStop.emit(event);\r\n\t\tthis.onChangeAny.emit(event);\r\n\r\n\t\tthis.onConfigChangeEvent();\r\n\t}\r\n\tpublic onCascadeEvent(): void {\r\n\t\tthis.onConfigChangeEvent();\r\n\t}\r\n\r\n\tpublic ngOnInit(): void {\r\n\t\tthis._renderer.addClass(this._ngEl.nativeElement, 'grid-item');\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setStyle(this._ngEl.nativeElement, 'position', 'absolute');\r\n\t\tthis._recalculateDimensions();\r\n\t\tthis._recalculatePosition();\r\n\r\n\t\t//\tForce a config update in case there is no config assigned\r\n\t\tthis.config = this._userConfig;\r\n\t}\r\n\r\n\t//\tPublic methods\r\n\tpublic canDrag(e: any): boolean {\r\n\t\tif (!this.isDraggable) return false;\r\n\r\n\t\tif (this._dragHandle) {\r\n\t\t\treturn this.findHandle(this._dragHandle, e.target);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic findHandle(handleSelector: string, startElement: HTMLElement): boolean {\r\n\t\ttry {\r\n\t\t\tlet targetElem: any = startElement;\r\n\r\n\t\t\twhile (targetElem && targetElem != this._ngEl.nativeElement) {\r\n\t\t\t\tif (this.elementMatches(targetElem, handleSelector)) return true;\r\n\r\n\t\t\t\ttargetElem = targetElem.parentElement;\r\n\t\t\t}\r\n\t\t} catch (err) {}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic canResize(e: any): string {\r\n\t\tif (!this.isResizable) return null;\r\n\r\n\t\tif (this._resizeHandle) {\r\n\t\t\tif (typeof this._resizeHandle === \"string\") {\r\n\t\t\t\treturn this.findHandle(this._resizeHandle, e.target) ? 'bottomright' : null;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof this._resizeHandle !== \"object\") return null;\r\n\r\n\t\t\tconst resizeDirections = [ 'bottomright', 'bottomleft', 'topright', 'topleft', 'right', 'left', 'bottom', 'top' ];\r\n\t\t\tfor (let direction of resizeDirections) {\r\n\t\t\t\tif (direction in this._resizeHandle) {\r\n\t\t\t\t\tif (this.findHandle(this._resizeHandle[direction], e.target)) {\r\n\t\t\t\t\t\treturn direction;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif (this._borderSize <= 0) return null;\r\n\r\n\t\tconst mousePos: NgGridRawPosition = this._getMousePosition(e);\r\n\r\n\t\tif (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize\r\n\t\t\t&& mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn 'bottomright';\r\n\t\t} else if (mousePos.left < this._borderSize && mousePos.top < this._elemHeight\r\n\t\t\t&& mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn 'bottomleft';\r\n\t\t} else if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize\r\n\t\t\t&& mousePos.top < this._borderSize) {\r\n\t\t\treturn 'topright';\r\n\t\t} else if (mousePos.left < this._borderSize && mousePos.top < this._borderSize) {\r\n\t\t\treturn 'topleft';\r\n\t\t} else if (mousePos.left < this._elemWidth && mousePos.left > this._elemWidth - this._borderSize) {\r\n\t\t\treturn 'right';\r\n\t\t} else if (mousePos.left < this._borderSize) {\r\n\t\t\treturn 'left';\r\n\t\t} else if (mousePos.top < this._elemHeight && mousePos.top > this._elemHeight - this._borderSize) {\r\n\t\t\treturn 'bottom';\r\n\t\t} else if (mousePos.top < this._borderSize) {\r\n\t\t\treturn 'top';\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic onMouseMove(e: any): void {\r\n\t\tif (this._ngGrid.autoStyle) {\r\n\t\t\tif (this._ngGrid.resizeEnable) {\r\n\t\t\t\tconst resizeDirection = this.canResize(e);\r\n\r\n\t\t\t\tlet cursor: string = \"default\";\r\n\t\t\t\tswitch (resizeDirection) {\r\n\t\t\t\t\tcase \"bottomright\":\r\n\t\t\t\t\tcase \"topleft\":\r\n\t\t\t\t\t\tcursor = \"nwse-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"topright\":\r\n\t\t\t\t\tcase \"bottomleft\":\r\n\t\t\t\t\t\tcursor = \"nesw-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\tcursor = \"ns-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\tcursor = \"ew-resize\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif (this._ngGrid.dragEnable && this.canDrag(e)) {\r\n\t\t\t\t\t\t\tcursor = 'move';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'cursor', cursor);\r\n\t\t\t} else if (this._ngGrid.dragEnable && this.canDrag(e)) {\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'cursor', 'move');\r\n\t\t\t} else {\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'cursor', 'default');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic ngOnDestroy(): void {\r\n\t\tif (this._added) this._ngGrid.removeItem(this);\r\n\t}\r\n\r\n\t//\tGetters\r\n\tpublic getElement(): ElementRef {\r\n\t\treturn this._ngEl;\r\n\t}\r\n\r\n\tpublic getDragHandle(): string {\r\n\t\treturn this._dragHandle;\r\n\t}\r\n\r\n\tpublic getResizeHandle(): ResizeHandle {\r\n\t\treturn this._resizeHandle;\r\n\t}\r\n\r\n\tpublic getDimensions(): NgGridItemDimensions {\r\n\t\treturn { 'width': this._elemWidth, 'height': this._elemHeight };\r\n\t}\r\n\r\n\tpublic getSize(): NgGridItemSize {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic getPosition(): NgGridRawPosition {\r\n\t\treturn { 'left': this._elemLeft, 'top': this._elemTop };\r\n\t}\r\n\r\n\tpublic getGridPosition(): NgGridItemPosition {\r\n\t\treturn this._currentPosition;\r\n\t}\r\n\r\n\t//\tSetters\r\n\tpublic setConfig(config: NgGridItemConfig): void {\r\n\t\tthis._config = config;\r\n\r\n\t\tthis._payload = config.payload;\r\n\t\tthis._currentPosition.col = config.col ? config.col : NgGridItem.CONST_DEFAULT_CONFIG.col;\r\n\t\tthis._currentPosition.row = config.row ? config.row : NgGridItem.CONST_DEFAULT_CONFIG.row;\r\n\t\tthis._size.x = config.sizex ? config.sizex : NgGridItem.CONST_DEFAULT_CONFIG.sizex;\r\n\t\tthis._size.y = config.sizey ? config.sizey : NgGridItem.CONST_DEFAULT_CONFIG.sizey;\r\n\t\tthis._dragHandle = config.dragHandle;\r\n\t\tthis._resizeHandle = config.resizeHandle;\r\n\t\tthis._borderSize = config.borderSize;\r\n\t\tthis.isDraggable = config.draggable ? true : false;\r\n\t\tthis.isResizable = config.resizable ? true : false;\r\n\t\tthis.isFixed = config.fixed ? true : false;\r\n\r\n\t\tthis._maxCols = !isNaN(config.maxCols) && isFinite(config.maxCols) ? config.maxCols : 0;\r\n\t\tthis._minCols = !isNaN(config.minCols) && isFinite(config.minCols) ? config.minCols : 0;\r\n\t\tthis._maxRows = !isNaN(config.maxRows) && isFinite(config.maxRows) ? config.maxRows : 0;\r\n\t\tthis._minRows = !isNaN(config.minRows) && isFinite(config.minRows) ? config.minRows : 0;\r\n\r\n\t\tthis.minWidth = !isNaN(config.minWidth) && isFinite(config.minWidth) ? config.minWidth : 0;\r\n\t\tthis.minHeight = !isNaN(config.minHeight) && isFinite(config.minHeight) ? config.minHeight : 0;\r\n\r\n\t\tif (this._minCols > 0 && this._maxCols > 0 && this._minCols > this._maxCols) this._minCols = 0;\r\n\t\tif (this._minRows > 0 && this._maxRows > 0 && this._minRows > this._maxRows) this._minRows = 0;\r\n\r\n\t\tif (this._added) {\r\n\t\t\tthis._ngGrid.updateItem(this);\r\n\t\t}\r\n\r\n\t\tthis._size = this.fixResize(this._size);\r\n\r\n\t\tthis._recalculatePosition();\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic ngDoCheck(): boolean {\r\n\t\tif (this._differ != null) {\r\n\t\t\tconst changes: any = this._differ.diff(this._userConfig);\r\n\r\n\t\t\tif (changes != null) {\r\n\t\t\t\treturn this._applyChanges(changes);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic setSize(newSize: NgGridItemSize, update: boolean = true): void {\r\n\t\tnewSize = this.fixResize(newSize);\r\n\t\tthis._size = newSize;\r\n\t\tif (update) this._recalculateDimensions();\r\n\r\n\t\tthis.onItemChange.emit(this.getEventOutput());\r\n\t}\r\n\r\n\tpublic setGridPosition(gridPosition: NgGridItemPosition, update: boolean = true): void {\r\n\t\tthis._currentPosition = gridPosition;\r\n\t\tif (update) this._recalculatePosition();\r\n\r\n\t\tthis.onItemChange.emit(this.getEventOutput());\r\n\t}\r\n\r\n\tpublic getEventOutput(): NgGridItemEvent {\r\n\t\treturn <NgGridItemEvent>{\r\n\t\t\tuid: this.uid,\r\n\t\t\tpayload: this._payload,\r\n\t\t\tcol: this._currentPosition.col,\r\n\t\t\trow: this._currentPosition.row,\r\n\t\t\tsizex: this._size.x,\r\n\t\t\tsizey: this._size.y,\r\n\t\t\twidth: this._elemWidth,\r\n\t\t\theight: this._elemHeight,\r\n\t\t\tleft: this._elemLeft,\r\n\t\t\ttop: this._elemTop\r\n\t\t};\r\n\t}\r\n\r\n\tpublic setPosition(x: number, y: number): void {\r\n\t\tswitch (this._cascadeMode) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', x + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', y + 'px');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', x + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', y + 'px');\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', x + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', y + 'px');\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis._elemLeft = x;\r\n\t\tthis._elemTop = y;\r\n\t}\r\n\r\n\tpublic setCascadeMode(cascade: string): void {\r\n\t\tthis._cascadeMode = cascade;\r\n\t\tswitch (cascade) {\r\n\t\t\tcase 'up':\r\n\t\t\tcase 'left':\r\n\t\t\tdefault:\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', this._elemLeft + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', this._elemTop + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', this._elemLeft + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', this._elemTop + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', null);\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', null);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'left', this._elemLeft + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'bottom', this._elemTop + 'px');\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'right', null);\r\n\t\t\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'top', null);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setDimensions(w: number, h: number): void {\r\n\t\tif (w < this.minWidth) w = this.minWidth;\r\n\t\tif (h < this.minHeight) h = this.minHeight;\r\n\r\n\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'width', w + 'px');\r\n\t\tthis._renderer.setStyle(this._ngEl.nativeElement, 'height', h + 'px');\r\n\r\n\t\tthis._elemWidth = w;\r\n\t\tthis._elemHeight = h;\r\n\t}\r\n\r\n\tpublic startMoving(): void {\r\n\t\tthis._renderer.addClass(this._ngEl.nativeElement, 'moving');\r\n\t\tconst style: any = window.getComputedStyle(this._ngEl.nativeElement);\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setStyle(this._ngEl.nativeElement, 'z-index', (parseInt(style.getPropertyValue('z-index')) + 1).toString());\r\n\t}\r\n\r\n\tpublic stopMoving(): void {\r\n\t\tthis._renderer.removeClass(this._ngEl.nativeElement, 'moving');\r\n\t\tconst style: any = window.getComputedStyle(this._ngEl.nativeElement);\r\n\t\tif (this._ngGrid.autoStyle) this._renderer.setStyle(this._ngEl.nativeElement, 'z-index', (parseInt(style.getPropertyValue('z-index')) - 1).toString());\r\n\t}\r\n\r\n\tpublic recalculateSelf(): void {\r\n\t\tthis._recalculatePosition();\r\n\t\tthis._recalculateDimensions();\r\n\t}\r\n\r\n\tpublic fixResize(newSize: NgGridItemSize): NgGridItemSize {\r\n\t\tif (this._maxCols > 0 && newSize.x > this._maxCols) newSize.x = this._maxCols;\r\n\t\tif (this._maxRows > 0 && newSize.y > this._maxRows) newSize.y = this._maxRows;\r\n\r\n\t\tif (this._minCols > 0 && newSize.x < this._minCols) newSize.x = this._minCols;\r\n\t\tif (this._minRows > 0 && newSize.y < this._minRows) newSize.y = this._minRows;\r\n\r\n\t\tconst itemWidth = (newSize.x * this._ngGrid.colWidth) + ((this._ngGrid.marginLeft + this._ngGrid.marginRight) * (newSize.x - 1));\r\n\t\tif (itemWidth < this.minWidth) newSize.x = Math.ceil((this.minWidth + this._ngGrid.marginRight + this._ngGrid.marginLeft) / (this._ngGrid.colWidth + this._ngGrid.marginRight + this._ngGrid.marginLeft));\r\n\r\n\t\tconst itemHeight = (newSize.y * this._ngGrid.rowHeight) + ((this._ngGrid.marginTop + this._ngGrid.marginBottom) * (newSize.y - 1));\r\n\t\tif (itemHeight < this.minHeight) newSize.y = Math.ceil((this.minHeight + this._ngGrid.marginBottom + this._ngGrid.marginTop) / (this._ngGrid.rowHeight + this._ngGrid.marginBottom + this._ngGrid.marginTop));\r\n\r\n\t\treturn newSize;\r\n\t}\r\n\r\n\t//\tPrivate methods\r\n\tprivate elementMatches(element: any, selector: string): boolean {\r\n\t\tif (!element) return false;\r\n\t\tif (element.matches) return element.matches(selector);\r\n\t\tif (element.oMatchesSelector) return element.oMatchesSelector(selector);\r\n\t\tif (element.msMatchesSelector) return element.msMatchesSelector(selector);\r\n\t\tif (element.mozMatchesSelector) return element.mozMatchesSelector(selector);\r\n\t\tif (element.webkitMatchesSelector) return element.webkitMatchesSelector(selector);\r\n\r\n\t\tif (!element.document || !element.ownerDocument) return false;\r\n\r\n\t\tconst matches: any = (element.document || element.ownerDocument).querySelectorAll(selector);\r\n\t\tlet i: number = matches.length;\r\n\t\twhile (--i >= 0 && matches.item(i) !== element) { }\r\n\t\treturn i > -1;\r\n\t}\r\n\r\n\tprivate _recalculatePosition(): void {\r\n\t\tconst x: number = (this._ngGrid.colWidth + this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._currentPosition.col - 1) + this._ngGrid.marginLeft + this._ngGrid.screenMargin;\r\n\t\tconst y: number = (this._ngGrid.rowHeight + this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._currentPosition.row - 1) + this._ngGrid.marginTop;\r\n\r\n\t\tthis.setPosition(x, y);\r\n\t}\r\n\r\n\tprivate _recalculateDimensions(): void {\r\n\t\tif (this._size.x < this._ngGrid.minCols) this._size.x = this._ngGrid.minCols;\r\n\t\tif (this._size.y < this._ngGrid.minRows) this._size.y = this._ngGrid.minRows;\r\n\r\n\t\tconst newWidth: number = (this._ngGrid.colWidth * this._size.x) + ((this._ngGrid.marginLeft + this._ngGrid.marginRight) * (this._size.x - 1));\r\n\t\tconst newHeight: number = (this._ngGrid.rowHeight * this._size.y) + ((this._ngGrid.marginTop + this._ngGrid.marginBottom) * (this._size.y - 1));\r\n\r\n\t\tconst w: number = Math.max(this.minWidth, this._ngGrid.minWidth, newWidth);\r\n\t\tconst h: number = Math.max(this.minHeight, this._ngGrid.minHeight, newHeight);\r\n\r\n\t\tthis.setDimensions(w, h);\r\n\t}\r\n\r\n\tprivate _getMousePosition(e: any): NgGridRawPosition {\r\n\t\tif (e.originalEvent && e.originalEvent.touches) {\r\n\t\t\tconst oe: any = e.originalEvent;\r\n\t\t\te = oe.touches.length ? oe.touches[0] : (oe.changedTouches.length ? oe.changedTouches[0] : e);\r\n\t\t} else if (e.touches) {\r\n\t\t\te = e.touches.length ? e.touches[0] : (e.changedTouches.length ? e.changedTouches[0] : e);\r\n\t\t}\r\n\r\n\r\n\t\tconst refPos: NgGridRawPosition = this._ngEl.nativeElement.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tleft: e.clientX - refPos.left,\r\n\t\t\ttop: e.clientY - refPos.top\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _applyChanges(changes: any): boolean {\r\n\t\tlet changed: boolean = false;\r\n\t\tconst changeCheck = (record: any) => {\r\n\t\t\tif (this._config[record.key] !== record.currentValue) {\r\n\t\t\t\tthis._config[record.key] = record.currentValue;\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\t\t};\r\n\t\tchanges.forEachAddedItem(changeCheck);\r\n\t\tchanges.forEachChangedItem(changeCheck);\r\n\t\tchanges.forEachRemovedItem((record: any) => {\r\n\t\t\tchanged = true;\r\n\t\t\tdelete this._config[record.key];\r\n\t\t});\r\n\r\n\t\tif (changed) {\r\n\t\t\tthis.setConfig(this._config);\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tprivate onConfigChangeEvent() {\r\n\t\tif (this._userConfig === null) return;\r\n\r\n\t\tthis._config.sizex = this._userConfig.sizex = this._size.x;\r\n\t\tthis._config.sizey = this._userConfig.sizey = this._size.y;\r\n\t\tthis._config.col = this._userConfig.col = this._currentPosition.col;\r\n\t\tthis._config.row = this._userConfig.row = this._currentPosition.row;\r\n\t\tthis.ngGridItemChange.emit(this._userConfig);\r\n\t}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { NgGrid } from '../directives/NgGrid';\r\nimport { NgGridItem } from '../directives/NgGridItem';\r\nimport { NgGridPlaceholder } from '../components/NgGridPlaceholder';\r\n\r\n@NgModule({\r\n  declarations:     [ NgGrid, NgGridItem, NgGridPlaceholder ],\r\n  entryComponents:  [ NgGridPlaceholder ],\r\n  exports:          [ NgGrid, NgGridItem ]\r\n})\r\nexport class NgGridModule {}"],"names":["Component","ElementRef","Renderer","EventEmitter","NgGridHelper.generateUuid","tslib_1.__values","NgGridHelper.sortItemsByPositionVertical","NgGridHelper.sortItemsByPositionHorizontal","fromEvent","Directive","KeyValueDiffers","ComponentFactoryResolver","Output","Renderer2","ViewContainerRef","NgModule"],"mappings":"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"}
